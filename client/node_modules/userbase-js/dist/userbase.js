var userbase=function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),s=n.length,i="";for(r=0;r<s;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return s%3==2?i=i.substring(0,i.length-1)+"=":s%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,n,s,i,a,o=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var h=new ArrayBuffer(o),f=new Uint8Array(h);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],s=r[e.charCodeAt(t+1)],i=r[e.charCodeAt(t+2)],a=r[e.charCodeAt(t+3)],f[u++]=n<<2|s>>4,f[u++]=(15&s)<<4|i>>2,f[u++]=(3&i)<<6|63&a;return h}}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(14),s=r(15);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[i+o]=a[o];return t||s(a)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(16),s=r(17),i=r(18);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=l(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),s=(e=o(e,n)).write(t,r);s!==n&&(e=e.slice(0,s));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=o(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?o(e,0):l(e,t);if("Buffer"===t.type&&i(t.data))return l(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(h(t),e=o(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return U(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,s){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,s);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,s){var i,a=1,o=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var h=-1;for(i=r;i<o;i++)if(u(e,i)===u(t,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===c)return h*a}else-1!==h&&(i-=i-h),h=-1}else for(r+c>o&&(r=o-c),i=r;i>=0;i--){for(var f=!0,l=0;l<c;l++)if(u(e,i+l)!==u(t,l)){f=!1;break}if(f)return i}return-1}function y(e,t,r,n){r=Number(r)||0;var s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var o=parseInt(t.substr(2*a,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function v(e,t,r,n){return F(K(t,e.length-r),e,r,n)}function M(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return M(e,t,r,n)}function I(e,t,r,n){return F(q(t),e,r,n)}function P(e,t,r,n){return F(function(e,t){for(var r,n,s,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,s=r%256,i.push(s),i.push(n);return i}(t,e.length-r),e,r,n)}function U(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],s=t;s<r;){var i,a,o,c,u=e[s],h=null,f=u>239?4:u>223?3:u>191?2:1;if(s+f<=r)switch(f){case 1:u<128&&(h=u);break;case 2:128==(192&(i=e[s+1]))&&(c=(31&u)<<6|63&i)>127&&(h=c);break;case 3:i=e[s+1],a=e[s+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:i=e[s+1],a=e[s+2],o=e[s+3],128==(192&i)&&128==(192&a)&&128==(192&o)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&o)>65535&&c<1114112&&(h=c)}null===h?(h=65533,f=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),s+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var a=e[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,s),s+=a.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,s){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(s>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(i,a),u=this.slice(n,s),h=e.slice(t,r),f=0;f<o;++f)if(u[f]!==h[f]){i=u[f],a=h[f];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return M(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function B(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=t;i<r;++i)s+=j(e[i]);return s}function x(e,t,r){for(var n=e.slice(t,r),s="",i=0;i<n.length;i+=2)s+=String.fromCharCode(n[i]+256*n[i+1]);return s}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,s,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n){t<0&&(t=65535+t+1);for(var s=0,i=Math.min(e.length-r,2);s<i;++s)e[r+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function O(e,t,r,n){t<0&&(t=4294967295+t+1);for(var s=0,i=Math.min(e.length-r,4);s<i;++s)e[r+s]=t>>>8*(n?s:3-s)&255}function C(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,i){return i||C(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,i){return i||C(e,0,r,8),s.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var s=t-e;r=new c(s,void 0);for(var i=0;i<s;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n},c.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),s.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),s.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),s.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),s.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var s=Math.pow(2,8*r-1);k(this,e,t,r,s-1,-s)}var i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var s=Math.pow(2,8*r-1);k(this,e,t,r,s-1,-s)}var i=r-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s,i=n-r;if(this===e&&r<t&&t<n)for(s=i-1;s>=0;--s)e[s+t]=this[s+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(s=0;s<i;++s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=c.isBuffer(e)?e:K(new c(e,n).toString()),o=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%o]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var r;t=t||1/0;for(var n=e.length,s=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}}).call(this,r(3))},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function s(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=r(21).Buffer}catch(e){}function o(e,t,r){for(var n=0,s=Math.min(e.length,r),i=t;i<s;i++){var a=e.charCodeAt(i)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function c(e,t,r,n){for(var s=0,i=Math.min(e.length,r),a=t;a<i;a++){var o=e.charCodeAt(a)-48;s*=n,s+=o>=49?o-49+10:o>=17?o-17+10:o}return s}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&s++,16===t?this._parseHex(e,s):this._parseBase(e,t,s),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,a,o=0;if("be"===r)for(s=e.length-1,i=0;s>=0;s-=3)a=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===r)for(s=0,i=0;s<e.length;s+=3)a=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,i=0;for(r=e.length-6,n=0;r>=t;r-=6)s=o(e,r,r+6),this.words[n]|=s<<i&67108863,this.words[n+1]|=s>>>26-i&4194303,(i+=24)>=26&&(i-=26,n++);r+6!==t&&(s=o(e,t,r+6),this.words[n]|=s<<i&67108863,this.words[n+1]|=s>>>26-i&4194303),this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var i=e.length-r,a=i%n,o=Math.min(i,i-a)+r,u=0,h=r;h<o;h+=n)u=c(e,h,h+n,t),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,h,e.length,t),h=0;h<a;h++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],i=0|t.words[0],a=s*i,o=67108863&a,c=a/67108864|0;r.words[0]=o;for(var u=1;u<n;u++){for(var h=c>>>26,f=67108863&c,l=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=l;d++){var p=u-d|0;h+=(a=(s=0|e.words[p])*(i=0|t.words[d])+f)/67108864|0,f=67108863&a}r.words[u]=0|f,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var s=0,i=0,a=0;a<this.length;a++){var o=this.words[a],c=(16777215&(o<<s|i)).toString(16);r=0!==(i=o>>>24-s&16777215)||a!==this.length-1?u[6-c.length]+c+r:c+r,(s+=2)>=26&&(s-=26,a--)}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:u[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var s=this.byteLength(),i=r||Math.max(1,s);n(s<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0"),this.strip();var a,o,c="le"===t,u=new e(i),h=this.clone();if(c){for(o=0;!h.isZero();o++)a=h.andln(255),h.iushrn(8),u[o]=a;for(;o<i;o++)u[o]=0}else{for(o=0;o<i-s;o++)u[o]=0;for(o=0;!h.isZero();o++)a=h.andln(255),h.iushrn(8),u[i-o-1]=a}return u},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return r>0&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,s=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<s:this.words[r]&~(1<<s),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var s=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<r.length;i++)t=(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)i=(t=(0|r.words[a])-(0|n.words[a])+i)>>26,this.words[a]=67108863&t;for(;0!==i&&a<r.length;a++)i=(t=(0|r.words[a])+i)>>26,this.words[a]=67108863&t;if(0===i&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,s,i,a=e.words,o=t.words,c=r.words,u=0,h=0|a[0],f=8191&h,l=h>>>13,d=0|a[1],p=8191&d,m=d>>>13,w=0|a[2],g=8191&w,b=w>>>13,y=0|a[3],v=8191&y,M=y>>>13,S=0|a[4],I=8191&S,P=S>>>13,U=0|a[5],E=8191&U,T=U>>>13,A=0|a[6],B=8191&A,x=A>>>13,N=0|a[7],k=8191&N,_=N>>>13,O=0|a[8],C=8191&O,R=O>>>13,D=0|a[9],L=8191&D,j=D>>>13,K=0|o[0],q=8191&K,F=K>>>13,H=0|o[1],V=8191&H,Y=H>>>13,G=0|o[2],J=8191&G,Z=G>>>13,z=0|o[3],W=8191&z,X=z>>>13,Q=0|o[4],$=8191&Q,ee=Q>>>13,te=0|o[5],re=8191&te,ne=te>>>13,se=0|o[6],ie=8191&se,ae=se>>>13,oe=0|o[7],ce=8191&oe,ue=oe>>>13,he=0|o[8],fe=8191&he,le=he>>>13,de=0|o[9],pe=8191&de,me=de>>>13;r.negative=e.negative^t.negative,r.length=19;var we=(u+(n=Math.imul(f,q))|0)+((8191&(s=(s=Math.imul(f,F))+Math.imul(l,q)|0))<<13)|0;u=((i=Math.imul(l,F))+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(p,q),s=(s=Math.imul(p,F))+Math.imul(m,q)|0,i=Math.imul(m,F);var ge=(u+(n=n+Math.imul(f,V)|0)|0)+((8191&(s=(s=s+Math.imul(f,Y)|0)+Math.imul(l,V)|0))<<13)|0;u=((i=i+Math.imul(l,Y)|0)+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,q),s=(s=Math.imul(g,F))+Math.imul(b,q)|0,i=Math.imul(b,F),n=n+Math.imul(p,V)|0,s=(s=s+Math.imul(p,Y)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Y)|0;var be=(u+(n=n+Math.imul(f,J)|0)|0)+((8191&(s=(s=s+Math.imul(f,Z)|0)+Math.imul(l,J)|0))<<13)|0;u=((i=i+Math.imul(l,Z)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(v,q),s=(s=Math.imul(v,F))+Math.imul(M,q)|0,i=Math.imul(M,F),n=n+Math.imul(g,V)|0,s=(s=s+Math.imul(g,Y)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,J)|0,s=(s=s+Math.imul(p,Z)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0;var ye=(u+(n=n+Math.imul(f,W)|0)|0)+((8191&(s=(s=s+Math.imul(f,X)|0)+Math.imul(l,W)|0))<<13)|0;u=((i=i+Math.imul(l,X)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(I,q),s=(s=Math.imul(I,F))+Math.imul(P,q)|0,i=Math.imul(P,F),n=n+Math.imul(v,V)|0,s=(s=s+Math.imul(v,Y)|0)+Math.imul(M,V)|0,i=i+Math.imul(M,Y)|0,n=n+Math.imul(g,J)|0,s=(s=s+Math.imul(g,Z)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,W)|0,s=(s=s+Math.imul(p,X)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,X)|0;var ve=(u+(n=n+Math.imul(f,$)|0)|0)+((8191&(s=(s=s+Math.imul(f,ee)|0)+Math.imul(l,$)|0))<<13)|0;u=((i=i+Math.imul(l,ee)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(E,q),s=(s=Math.imul(E,F))+Math.imul(T,q)|0,i=Math.imul(T,F),n=n+Math.imul(I,V)|0,s=(s=s+Math.imul(I,Y)|0)+Math.imul(P,V)|0,i=i+Math.imul(P,Y)|0,n=n+Math.imul(v,J)|0,s=(s=s+Math.imul(v,Z)|0)+Math.imul(M,J)|0,i=i+Math.imul(M,Z)|0,n=n+Math.imul(g,W)|0,s=(s=s+Math.imul(g,X)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,$)|0,i=i+Math.imul(m,ee)|0;var Me=(u+(n=n+Math.imul(f,re)|0)|0)+((8191&(s=(s=s+Math.imul(f,ne)|0)+Math.imul(l,re)|0))<<13)|0;u=((i=i+Math.imul(l,ne)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(B,q),s=(s=Math.imul(B,F))+Math.imul(x,q)|0,i=Math.imul(x,F),n=n+Math.imul(E,V)|0,s=(s=s+Math.imul(E,Y)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(I,J)|0,s=(s=s+Math.imul(I,Z)|0)+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,n=n+Math.imul(v,W)|0,s=(s=s+Math.imul(v,X)|0)+Math.imul(M,W)|0,i=i+Math.imul(M,X)|0,n=n+Math.imul(g,$)|0,s=(s=s+Math.imul(g,ee)|0)+Math.imul(b,$)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Se=(u+(n=n+Math.imul(f,ie)|0)|0)+((8191&(s=(s=s+Math.imul(f,ae)|0)+Math.imul(l,ie)|0))<<13)|0;u=((i=i+Math.imul(l,ae)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(k,q),s=(s=Math.imul(k,F))+Math.imul(_,q)|0,i=Math.imul(_,F),n=n+Math.imul(B,V)|0,s=(s=s+Math.imul(B,Y)|0)+Math.imul(x,V)|0,i=i+Math.imul(x,Y)|0,n=n+Math.imul(E,J)|0,s=(s=s+Math.imul(E,Z)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(I,W)|0,s=(s=s+Math.imul(I,X)|0)+Math.imul(P,W)|0,i=i+Math.imul(P,X)|0,n=n+Math.imul(v,$)|0,s=(s=s+Math.imul(v,ee)|0)+Math.imul(M,$)|0,i=i+Math.imul(M,ee)|0,n=n+Math.imul(g,re)|0,s=(s=s+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,ae)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,ae)|0;var Ie=(u+(n=n+Math.imul(f,ce)|0)|0)+((8191&(s=(s=s+Math.imul(f,ue)|0)+Math.imul(l,ce)|0))<<13)|0;u=((i=i+Math.imul(l,ue)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(C,q),s=(s=Math.imul(C,F))+Math.imul(R,q)|0,i=Math.imul(R,F),n=n+Math.imul(k,V)|0,s=(s=s+Math.imul(k,Y)|0)+Math.imul(_,V)|0,i=i+Math.imul(_,Y)|0,n=n+Math.imul(B,J)|0,s=(s=s+Math.imul(B,Z)|0)+Math.imul(x,J)|0,i=i+Math.imul(x,Z)|0,n=n+Math.imul(E,W)|0,s=(s=s+Math.imul(E,X)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,X)|0,n=n+Math.imul(I,$)|0,s=(s=s+Math.imul(I,ee)|0)+Math.imul(P,$)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(v,re)|0,s=(s=s+Math.imul(v,ne)|0)+Math.imul(M,re)|0,i=i+Math.imul(M,ne)|0,n=n+Math.imul(g,ie)|0,s=(s=s+Math.imul(g,ae)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,ae)|0,n=n+Math.imul(p,ce)|0,s=(s=s+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Pe=(u+(n=n+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,le)|0)+Math.imul(l,fe)|0))<<13)|0;u=((i=i+Math.imul(l,le)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,q),s=(s=Math.imul(L,F))+Math.imul(j,q)|0,i=Math.imul(j,F),n=n+Math.imul(C,V)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(k,J)|0,s=(s=s+Math.imul(k,Z)|0)+Math.imul(_,J)|0,i=i+Math.imul(_,Z)|0,n=n+Math.imul(B,W)|0,s=(s=s+Math.imul(B,X)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,X)|0,n=n+Math.imul(E,$)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(T,$)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(I,re)|0,s=(s=s+Math.imul(I,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(v,ie)|0,s=(s=s+Math.imul(v,ae)|0)+Math.imul(M,ie)|0,i=i+Math.imul(M,ae)|0,n=n+Math.imul(g,ce)|0,s=(s=s+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,fe)|0,s=(s=s+Math.imul(p,le)|0)+Math.imul(m,fe)|0,i=i+Math.imul(m,le)|0;var Ue=(u+(n=n+Math.imul(f,pe)|0)|0)+((8191&(s=(s=s+Math.imul(f,me)|0)+Math.imul(l,pe)|0))<<13)|0;u=((i=i+Math.imul(l,me)|0)+(s>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,n=Math.imul(L,V),s=(s=Math.imul(L,Y))+Math.imul(j,V)|0,i=Math.imul(j,Y),n=n+Math.imul(C,J)|0,s=(s=s+Math.imul(C,Z)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(k,W)|0,s=(s=s+Math.imul(k,X)|0)+Math.imul(_,W)|0,i=i+Math.imul(_,X)|0,n=n+Math.imul(B,$)|0,s=(s=s+Math.imul(B,ee)|0)+Math.imul(x,$)|0,i=i+Math.imul(x,ee)|0,n=n+Math.imul(E,re)|0,s=(s=s+Math.imul(E,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(I,ie)|0,s=(s=s+Math.imul(I,ae)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,ae)|0,n=n+Math.imul(v,ce)|0,s=(s=s+Math.imul(v,ue)|0)+Math.imul(M,ce)|0,i=i+Math.imul(M,ue)|0,n=n+Math.imul(g,fe)|0,s=(s=s+Math.imul(g,le)|0)+Math.imul(b,fe)|0,i=i+Math.imul(b,le)|0;var Ee=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),s=(s=Math.imul(L,Z))+Math.imul(j,J)|0,i=Math.imul(j,Z),n=n+Math.imul(C,W)|0,s=(s=s+Math.imul(C,X)|0)+Math.imul(R,W)|0,i=i+Math.imul(R,X)|0,n=n+Math.imul(k,$)|0,s=(s=s+Math.imul(k,ee)|0)+Math.imul(_,$)|0,i=i+Math.imul(_,ee)|0,n=n+Math.imul(B,re)|0,s=(s=s+Math.imul(B,ne)|0)+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,n=n+Math.imul(E,ie)|0,s=(s=s+Math.imul(E,ae)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,ae)|0,n=n+Math.imul(I,ce)|0,s=(s=s+Math.imul(I,ue)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,ue)|0,n=n+Math.imul(v,fe)|0,s=(s=s+Math.imul(v,le)|0)+Math.imul(M,fe)|0,i=i+Math.imul(M,le)|0;var Te=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(s=(s=s+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,W),s=(s=Math.imul(L,X))+Math.imul(j,W)|0,i=Math.imul(j,X),n=n+Math.imul(C,$)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(R,$)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(k,re)|0,s=(s=s+Math.imul(k,ne)|0)+Math.imul(_,re)|0,i=i+Math.imul(_,ne)|0,n=n+Math.imul(B,ie)|0,s=(s=s+Math.imul(B,ae)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,ae)|0,n=n+Math.imul(E,ce)|0,s=(s=s+Math.imul(E,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(I,fe)|0,s=(s=s+Math.imul(I,le)|0)+Math.imul(P,fe)|0,i=i+Math.imul(P,le)|0;var Ae=(u+(n=n+Math.imul(v,pe)|0)|0)+((8191&(s=(s=s+Math.imul(v,me)|0)+Math.imul(M,pe)|0))<<13)|0;u=((i=i+Math.imul(M,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,$),s=(s=Math.imul(L,ee))+Math.imul(j,$)|0,i=Math.imul(j,ee),n=n+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(k,ie)|0,s=(s=s+Math.imul(k,ae)|0)+Math.imul(_,ie)|0,i=i+Math.imul(_,ae)|0,n=n+Math.imul(B,ce)|0,s=(s=s+Math.imul(B,ue)|0)+Math.imul(x,ce)|0,i=i+Math.imul(x,ue)|0,n=n+Math.imul(E,fe)|0,s=(s=s+Math.imul(E,le)|0)+Math.imul(T,fe)|0,i=i+Math.imul(T,le)|0;var Be=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(s=(s=s+Math.imul(I,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((i=i+Math.imul(P,me)|0)+(s>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(L,re),s=(s=Math.imul(L,ne))+Math.imul(j,re)|0,i=Math.imul(j,ne),n=n+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,ae)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,ae)|0,n=n+Math.imul(k,ce)|0,s=(s=s+Math.imul(k,ue)|0)+Math.imul(_,ce)|0,i=i+Math.imul(_,ue)|0,n=n+Math.imul(B,fe)|0,s=(s=s+Math.imul(B,le)|0)+Math.imul(x,fe)|0,i=i+Math.imul(x,le)|0;var xe=(u+(n=n+Math.imul(E,pe)|0)|0)+((8191&(s=(s=s+Math.imul(E,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(L,ie),s=(s=Math.imul(L,ae))+Math.imul(j,ie)|0,i=Math.imul(j,ae),n=n+Math.imul(C,ce)|0,s=(s=s+Math.imul(C,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(k,fe)|0,s=(s=s+Math.imul(k,le)|0)+Math.imul(_,fe)|0,i=i+Math.imul(_,le)|0;var Ne=(u+(n=n+Math.imul(B,pe)|0)|0)+((8191&(s=(s=s+Math.imul(B,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(L,ce),s=(s=Math.imul(L,ue))+Math.imul(j,ce)|0,i=Math.imul(j,ue),n=n+Math.imul(C,fe)|0,s=(s=s+Math.imul(C,le)|0)+Math.imul(R,fe)|0,i=i+Math.imul(R,le)|0;var ke=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(s=(s=s+Math.imul(k,me)|0)+Math.imul(_,pe)|0))<<13)|0;u=((i=i+Math.imul(_,me)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(L,fe),s=(s=Math.imul(L,le))+Math.imul(j,fe)|0,i=Math.imul(j,le);var _e=(u+(n=n+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863;var Oe=(u+(n=Math.imul(L,pe))|0)+((8191&(s=(s=Math.imul(L,me))+Math.imul(j,pe)|0))<<13)|0;return u=((i=Math.imul(j,me))+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,c[0]=we,c[1]=ge,c[2]=be,c[3]=ye,c[4]=ve,c[5]=Me,c[6]=Se,c[7]=Ie,c[8]=Pe,c[9]=Ue,c[10]=Ee,c[11]=Te,c[12]=Ae,c[13]=Be,c[14]=xe,c[15]=Ne,c[16]=ke,c[17]=_e,c[18]=Oe,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(d=l),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?l(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,i=0;i<r.length-1;i++){var a=s;s=0;for(var o=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var h=i-u,f=(0|e.words[h])*(0|t.words[u]),l=67108863&f;o=67108863&(l=l+o|0),s+=(a=(a=a+(f/67108864|0)|0)+(l>>>26)|0)>>>26,a&=67108863}r.words[i]=o,n=a,a=s}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,s=0;s<t;s++)n|=(1&e)<<t-s-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,s,i){for(var a=0;a<i;a++)n[a]=t[e[a]],s[a]=r[e[a]]},m.prototype.transform=function(e,t,r,n,s,i){this.permute(i,e,t,r,n,s);for(var a=1;a<s;a<<=1)for(var o=a<<1,c=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),h=0;h<s;h+=o)for(var f=c,l=u,d=0;d<a;d++){var p=r[h+d],m=n[h+d],w=r[h+d+a],g=n[h+d+a],b=f*w-l*g;g=f*g+l*w,w=b,r[h+d]=p+w,n[h+d]=m+g,r[h+d+a]=p-w,n[h+d+a]=m-g,d!==o&&(b=c*f-u*l,l=c*l+u*f,f=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,s=0;for(r=r/2|0;r;r>>>=1)s++;return 1<<s+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var s=e[n];e[n]=e[r-n-1],e[r-n-1]=s,s=t[n],t[n]=-t[r-n-1],t[r-n-1]=-s}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var s=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&s,r=s<67108864?0:s/67108864|0}return e},m.prototype.convert13b=function(e,t,r,s){for(var i=0,a=0;a<t;a++)i+=0|e[a],r[2*a]=8191&i,i>>>=13,r[2*a+1]=8191&i,i>>>=13;for(a=2*t;a<s;++a)r[a]=0;n(0===i),n(0==(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(n),i=this.stub(n),a=new Array(n),o=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),f=new Array(n),l=r.words;l.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,u,n),this.transform(a,i,o,c,n,s),this.transform(u,i,h,f,n,s);for(var d=0;d<n;d++){var p=o[d]*h[d]-c[d]*f[d];c[d]=o[d]*f[d]+c[d]*h[d],o[d]=p}return this.conjugate(o,c,n),this.transform(o,c,l,i,n,s),this.conjugate(l,i,n),this.normalize13b(l,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),p(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var s=(0|this.words[r])*e,i=(67108863&s)+(67108863&t);t>>=26,t+=s/67108864|0,t+=i>>>26,this.words[r]=67108863&i}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=(e.words[n]&1<<s)>>>s}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var s=r.sqr();n<t.length;n++,s=s.sqr())0!==t[n]&&(r=r.mul(s));return r},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,s=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,c=(0|this.words[t])-o<<r;this.words[t]=c|a,a=o>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var s;n("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,a=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,c=r;if(s-=a,s=Math.max(0,s),c){for(var u=0;u<a;u++)c.words[u]=this.words[u];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=s);u--){var f=0|this.words[u];this.words[u]=h<<26-i|f>>>i,h=f&o}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,s=1<<t;return!(this.length<=r)&&!!(this.words[r]&s)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var s,i,a=e.length+r;this._expand(a);var o=0;for(s=0;s<e.length;s++){i=(0|this.words[s+r])+o;var c=(0|e.words[s])*t;o=((i-=67108863&c)>>26)-(c/67108864|0),this.words[s+r]=67108863&i}for(;s<this.length-r;s++)o=(i=(0|this.words[s+r])+o)>>26,this.words[s+r]=67108863&i;if(0===o)return this.strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(i=-(0|this.words[s])+o)>>26,this.words[s]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),s=e,a=0|s.words[s.length-1];0!==(r=26-this._countBits(a))&&(s=s.ushln(r),n.iushln(r),a=0|s.words[s.length-1]);var o,c=n.length-s.length;if("mod"!==t){(o=new i(null)).length=c+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var h=n.clone()._ishlnsubmul(s,1,c);0===h.negative&&(n=h,o&&(o.words[c]=1));for(var f=c-1;f>=0;f--){var l=67108864*(0|n.words[s.length+f])+(0|n.words[s.length+f-1]);for(l=Math.min(l/a|0,67108863),n._ishlnsubmul(s,l,f);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(s,1,f),n.isZero()||(n.negative^=1);o&&(o.words[f]=l)}return o&&o.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:s,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var s,a,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),i=r.cmp(n);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,s=this.length-1;s>=0;s--)r=(t*r+(0|this.words[s]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var s=(0|this.words[r])+67108864*t;this.words[r]=s/e|0,t=s%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new i(1),a=new i(0),o=new i(0),c=new i(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),f=t.clone();!t.isZero();){for(var l=0,d=1;0==(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(h),a.isub(f)),s.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(h),c.isub(f)),o.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(o),a.isub(c)):(r.isub(t),o.isub(s),c.isub(a))}return{a:o,b:c,gcd:r.iushln(u)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s,a=new i(1),o=new i(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0==(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var f=0,l=1;0==(r.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(r.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}return(s=0===t.cmpn(1)?a:o).cmpn(0)<0&&s.iadd(e),s},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var i=t;t=r,r=i}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,s=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var i=s,a=r;0!==i&&a<this.length;a++){var o=0|this.words[a];i=(o+=i)>>>26,o&=67108863,this.words[a]=o}return 0!==i&&(this.words[a]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},s(b,g),b.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=4194303&s,n=10;n<e.length;n++){var i=0|e.words[n];e.words[n-10]=(4194303&i)<<4|s>>>22,s=i}s>>>=22,e.words[n-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(y,g),s(v,g),s(M,g),M.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,s=67108863&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new y;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return w[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var s=this.m.subn(1),a=0;!s.isZero()&&0===s.andln(1);)a++,s.iushrn(1);n(!s.isZero());var o=new i(1).toRed(this),c=o.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var f=this.pow(h,s),l=this.pow(e,s.addn(1).iushrn(1)),d=this.pow(e,s),p=a;0!==d.cmp(o);){for(var m=d,w=0;0!==m.cmp(o);w++)m=m.redSqr();n(w<p);var g=this.pow(f,new i(1).iushln(p-w-1));l=l.redMul(g),f=g.redSqr(),d=d.redMul(f),p=w}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var s=r[0],a=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var f=u>>h&1;s!==r[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,(4===++o||0===n&&0===h)&&(s=this.mul(s,r[a]),o=0,a=0)):o=0}c=26}return s},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new I(e)},s(I,S),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(20)(e))},function(e,t,r){var n,s=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(r){return s(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,s=t.length;n<s;n++){var a=t.charCodeAt(n);r[2*n]=a>>>8,r[2*n+1]=a%256}return r},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,s=r.length;n<s;n++)r[n]=256*t[2*n]+t[2*n+1];var a=[];return r.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return s(r,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var n,s,i,a={},o={},c="",u="",h="",f=2,l=3,d=2,p=[],m=0,w=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=l++,o[c]=!0),u=h+c,Object.prototype.hasOwnProperty.call(a,u))h=u;else{if(Object.prototype.hasOwnProperty.call(o,h)){if(h.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,w==t-1?(w=0,p.push(r(m)),m=0):w++;for(s=h.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1}else{for(s=1,n=0;n<d;n++)m=m<<1|s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s=0;for(s=h.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1}0==--f&&(f=Math.pow(2,d),d++),delete o[h]}else for(s=a[h],n=0;n<d;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1;0==--f&&(f=Math.pow(2,d),d++),a[u]=l++,h=String(c)}if(""!==h){if(Object.prototype.hasOwnProperty.call(o,h)){if(h.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,w==t-1?(w=0,p.push(r(m)),m=0):w++;for(s=h.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1}else{for(s=1,n=0;n<d;n++)m=m<<1|s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s=0;for(s=h.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1}0==--f&&(f=Math.pow(2,d),d++),delete o[h]}else for(s=a[h],n=0;n<d;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1;0==--f&&(f=Math.pow(2,d),d++)}for(s=2,n=0;n<d;n++)m=m<<1|1&s,w==t-1?(w=0,p.push(r(m)),m=0):w++,s>>=1;for(;;){if(m<<=1,w==t-1){p.push(r(m));break}w++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,n){var s,i,a,o,c,u,h,f=[],l=4,d=4,p=3,m="",w=[],g={val:n(0),position:r,index:1};for(s=0;s<3;s+=1)f[s]=s;for(a=0,c=Math.pow(2,2),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;h=e(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;h=e(a);break;case 2:return""}for(f[3]=h,i=h,w.push(h);;){if(g.index>t)return"";for(a=0,c=Math.pow(2,p),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;switch(h=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;f[d++]=e(a),h=d-1,l--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),a|=(o>0?1:0)*u,u<<=1;f[d++]=e(a),h=d-1,l--;break;case 2:return w.join("")}if(0==l&&(l=Math.pow(2,p),p++),f[h])m=f[h];else{if(h!==d)return null;m=i+i.charAt(0)}w.push(m),f[d++]=i+m.charAt(0),i=m,0==--l&&(l=Math.pow(2,p),p++)}}};return i}();void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n=r(8);e.exports=b,b.simpleSieve=w,b.fermatTest=g;var s=r(5),i=new s(24),a=new(r(10)),o=new s(1),c=new s(2),u=new s(5),h=(new s(16),new s(8),new s(10)),f=new s(3),l=(new s(7),new s(11)),d=new s(4),p=(new s(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),s=0;s<t&&e[s]<=n&&r%e[s]!=0;s++);t!==s&&e[s]<=n||(e[t++]=r)}return p=e,e}function w(e){for(var t=m(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function g(e){var t=s.mont(e);return 0===c.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function b(e,t){if(e<16)return new s(2===t||5===t?[140,123]:[140,39]);var r,p;for(t=new s(t);;){for(r=new s(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(o),r.testn(1)||r.iadd(c),t.cmp(c)){if(!t.cmp(u))for(;r.mod(h).cmp(f);)r.iadd(d)}else for(;r.mod(i).cmp(l);)r.iadd(d);if(w(p=r.shrn(1))&&w(r)&&g(p)&&g(r)&&a.test(p)&&a.test(r))return r}}},function(e,t,r){"use strict";(function(t,n){var s=r(19).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=s.allocUnsafe(e);if(e>0)if(e>65536)for(var a=0;a<e;a+=65536)i.getRandomValues(r.slice(a,a+65536));else i.getRandomValues(r);if("function"==typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(3),r(9))},function(e,t){var r,n,s=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,u=[],h=!1,f=-1;function l(){h&&c&&(h=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!h){var e=o(l);h=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||h||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){var n=r(5),s=r(22);function i(e){this.rand=e||new s.Rand}e.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var s=new n(this.rand.generate(r))}while(s.cmp(e)>=0);return s},i.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},i.prototype.test=function(e,t,r){var s=e.bitLength(),i=n.mont(e),a=new n(1).toRed(i);t||(t=Math.max(1,s/48|0));for(var o=e.subn(1),c=0;!o.testn(c);c++);for(var u=e.shrn(c),h=o.toRed(i);t>0;t--){var f=this._randrange(new n(2),o);r&&r(f);var l=f.toRed(i).redPow(u);if(0!==l.cmp(a)&&0!==l.cmp(h)){for(var d=1;d<c;d++){if(0===(l=l.redSqr()).cmp(a))return!1;if(0===l.cmp(h))break}if(d===c)return!1}}return!0},i.prototype.getDivisor=function(e,t){var r=e.bitLength(),s=n.mont(e),i=new n(1).toRed(s);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),o=0;!a.testn(o);o++);for(var c=e.shrn(o),u=a.toRed(s);t>0;t--){var h=this._randrange(new n(2),a),f=e.gcd(h);if(0!==f.cmpn(1))return f;var l=h.toRed(s).redPow(c);if(0!==l.cmp(i)&&0!==l.cmp(u)){for(var d=1;d<o;d++){if(0===(l=l.redSqr()).cmp(i))return l.fromRed().subn(1).gcd(e);if(0===l.cmp(u))break}if(d===o)return(l=l.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,r){(function(e){var n=r(7),s=r(24),i=r(25);var a={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var r=new e(s[t].prime,"hex"),n=new e(s[t].gen,"hex");return new i(r,n)},t.createDiffieHellman=t.DiffieHellman=function t(r,s,o,c){return e.isBuffer(s)||void 0===a[s]?t(r,"binary",s,o):(s=s||"binary",c=c||"binary",o=o||new e([2]),e.isBuffer(o)||(o=new e(o,c)),"number"==typeof r?new i(n(r,o),o,!0):(e.isBuffer(r)||(r=new e(r,s)),new i(r,o,!0)))}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";(function(t){!function(r){function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,s=1013904242,i=2773480762,a=1359893119,o=2600822924,c=528734635,u=1541459225;const h=new Uint32Array(64);function f(e){let f=0,l=e.length;for(;l>=64;){let d,p,m,w,g,b=r,y=n,v=s,M=i,S=a,I=o,P=c,U=u;for(p=0;p<16;p++)m=f+4*p,h[p]=(255&e[m])<<24|(255&e[m+1])<<16|(255&e[m+2])<<8|255&e[m+3];for(p=16;p<64;p++)d=h[p-2],w=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,d=h[p-15],g=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,h[p]=(w+h[p-7]|0)+(g+h[p-16]|0)|0;for(p=0;p<64;p++)w=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&I^~S&P)|0)+(U+(t[p]+h[p]|0)|0)|0,g=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&y^b&v^y&v)|0,U=P,P=I,I=S,S=M+w|0,M=v,v=y,y=b,b=w+g|0;r=r+b|0,n=n+y|0,s=s+v|0,i=i+M|0,a=a+S|0,o=o+I|0,c=c+P|0,u=u+U|0,f+=64,l-=64}}f(e);let l,d=e.length%64,p=e.length/536870912|0,m=e.length<<3,w=d<56?56:120,g=e.slice(e.length-d,e.length);for(g.push(128),l=d+1;l<w;l++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(m>>>24&255),g.push(m>>>16&255),g.push(m>>>8&255),g.push(m>>>0&255),f(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function s(e,t,r){e=e.length<=64?e:n(e);const s=64+t.length+4,i=new Array(s),a=new Array(64);let o,c=[];for(o=0;o<64;o++)i[o]=54;for(o=0;o<e.length;o++)i[o]^=e[o];for(o=0;o<t.length;o++)i[64+o]=t[o];for(o=s-4;o<s;o++)i[o]=0;for(o=0;o<64;o++)a[o]=92;for(o=0;o<e.length;o++)a[o]^=e[o];function u(){for(let e=s-1;e>=s-4;e--){if(i[e]++,i[e]<=255)return;i[e]=0}}for(;r>=32;)u(),c=c.concat(n(a.concat(n(i)))),r-=32;return r>0&&(u(),c=c.concat(n(a.concat(n(i))).slice(0,r))),c}function i(e,t,r,n,s){let i;for(u(e,16*(2*r-1),s,0,16),i=0;i<2*r;i++)c(e,16*i,s,16),o(s,n),u(s,0,e,t+16*i,16);for(i=0;i<r;i++)u(e,t+2*i*16,e,16*i,16);for(i=0;i<r;i++)u(e,t+16*(2*i+1),e,16*(i+r),16)}function a(e,t){return e<<t|e>>>32-t}function o(e,t){u(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=a(t[0]+t[12],7),t[8]^=a(t[4]+t[0],9),t[12]^=a(t[8]+t[4],13),t[0]^=a(t[12]+t[8],18),t[9]^=a(t[5]+t[1],7),t[13]^=a(t[9]+t[5],9),t[1]^=a(t[13]+t[9],13),t[5]^=a(t[1]+t[13],18),t[14]^=a(t[10]+t[6],7),t[2]^=a(t[14]+t[10],9),t[6]^=a(t[2]+t[14],13),t[10]^=a(t[6]+t[2],18),t[3]^=a(t[15]+t[11],7),t[7]^=a(t[3]+t[15],9),t[11]^=a(t[7]+t[3],13),t[15]^=a(t[11]+t[7],18),t[1]^=a(t[0]+t[3],7),t[2]^=a(t[1]+t[0],9),t[3]^=a(t[2]+t[1],13),t[0]^=a(t[3]+t[2],18),t[6]^=a(t[5]+t[4],7),t[7]^=a(t[6]+t[5],9),t[4]^=a(t[7]+t[6],13),t[5]^=a(t[4]+t[7],18),t[11]^=a(t[10]+t[9],7),t[8]^=a(t[11]+t[10],9),t[9]^=a(t[8]+t[11],13),t[10]^=a(t[9]+t[8],18),t[12]^=a(t[15]+t[14],7),t[13]^=a(t[12]+t[15],9),t[14]^=a(t[13]+t[12],13),t[15]^=a(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function c(e,t,r,n){for(let s=0;s<n;s++)r[s]^=e[t+s]}function u(e,t,r,n,s){for(;s--;)r[n++]=e[t++]}function h(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function f(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function l(e,r,n,a,o,l,d){if(n=f(n,"N"),a=f(a,"r"),o=f(o,"p"),l=f(l,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>2147483647/128/a)throw new Error("N too large");if(a>2147483647/128/o)throw new Error("r too large");if(!h(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!h(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let p=s(e,r,128*o*a);const m=new Uint32Array(32*o*a);for(let e=0;e<m.length;e++){const t=4*e;m[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|(255&p[t+0])<<0}const w=new Uint32Array(64*a),g=new Uint32Array(32*a*n),b=32*a,y=new Uint32Array(16),v=new Uint32Array(16),M=o*n*2;let S,I,P=0,U=null,E=!1,T=0,A=0;const B=d?parseInt(1e3/a):4294967295,x=void 0!==t?t:setTimeout,N=function(){if(E)return d(new Error("cancelled"),P/M);let t;switch(T){case 0:I=32*A*a,u(m,I,w,0,b),T=1,S=0;case 1:t=n-S,t>B&&(t=B);for(let e=0;e<t;e++)u(w,0,g,(S+e)*b,b),i(w,b,a,y,v);if(S+=t,P+=t,d){const e=parseInt(1e3*P/M);if(e!==U){if(E=d(null,P/M),E)break;U=e}}if(S<n)break;S=0,T=2;case 2:t=n-S,t>B&&(t=B);for(let e=0;e<t;e++){const e=w[16*(2*a-1)]&n-1;c(g,e*b,w,b),i(w,b,a,y,v)}if(S+=t,P+=t,d){const e=parseInt(1e3*P/M);if(e!==U){if(E=d(null,P/M),E)break;U=e}}if(S<n)break;if(u(w,0,m,I,b),A++,A<o){T=0;break}p=[];for(let e=0;e<m.length;e++)p.push(m[e]>>0&255),p.push(m[e]>>8&255),p.push(m[e]>>16&255),p.push(m[e]>>24&255);const r=s(e,p,l);return d&&d(null,1,r),r}d&&x(N)};if(!d)for(;;){const e=N();if(null!=e)return e}N()}const d={scrypt:function(e,t,r,n,s,i,a){return new Promise((function(o,c){let u=0;a&&a(0),l(e,t,r,n,s,i,(function(e,t,r){if(e)c(e);else if(r)a&&1!==u&&a(1),o(new Uint8Array(r));else if(a&&t!==u)return u=t,a(t)}))}))},syncScrypt:function(e,t,r,n,s,i){return new Uint8Array(l(e,t,r,n,s,i))}};e.exports=d}()}).call(this,r(26).setImmediate)},function(e,t,r){var n,s=function(){var e,t,r=((t=(e={constructor:function(e,t){this.array=[],this.compare=t||n;for(var r=e.length,s=0;s<r;)this.insert(e[s++])},insert:function(e){for(var t,r,n=this.array,s=this.compare,i=n.length-1,a=0,o=-1;i>=a;)if((r=s(n[t=(i+a)/2>>>0],e))<0)a=t+1;else{if(!(r>0)){o=t;break}i=t-1}for(-1===o&&(o=i),o++,i=n.length-1;o<i&&0===s(e,n[o]);)o++;for(t=n.length,n.push(e);t>o;)n[t]=n[--t];return n[o]=e,this},search:function(e){for(var t,r,n=this.array,s=this.compare,i=n.length-1,a=0;i>=a;)if((r=s(n[t=(i+a)/2>>>0],e))<0)a=t+1;else{if(!(r>0))return t;i=t-1}return-1},remove:function(e){var t=this.search(e);return t>=0&&this.array.splice(t,1),this}}).constructor).prototype=e,t);return r.comparing=function(e,t){return new r(t,(function(t,r){return n(t[e],r[e])}))},r;function n(e,t){return e<t?-1:e>t?1:0}}();e.exports=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,s=r;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")}},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),a=n[0],o=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,o)),h=0,f=o>0?a-4:a;for(r=0;r<f;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,c[h++]=255&t);1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,s=r%3,i=[],a=0,o=r-s;a<o;a+=16383)i.push(h(e,a,a+16383>o?o:a+16383));1===s?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===s&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=a.length;o<c;++o)n[o]=a[o],s[a.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var s,i,a=[],o=t;o<r;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(n[(i=s)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,s){var i,a,o=8*s-n-1,c=(1<<o)-1,u=c>>1,h=-7,f=r?s-1:0,l=r?-1:1,d=e[t+f];for(f+=l,i=d&(1<<-h)-1,d>>=-h,h+=o;h>0;i=256*i+e[t+f],f+=l,h-=8);for(a=i&(1<<-h)-1,i>>=-h,h+=n;h>0;a=256*a+e[t+f],f+=l,h-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=u}return(d?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,s,i){var a,o,c,u=8*i-s-1,h=(1<<u)-1,f=h>>1,l=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?l/c:l*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=h?(o=0,a=h):a+f>=1?(o=(t*c-1)*Math.pow(2,s),a+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[r+d]=255&o,d+=p,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;e[r+d]=255&a,d+=p,a/=256,u-=8);e[r+d-p]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(4),s=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return s(e,t,r)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=a),a.prototype=Object.create(s.prototype),i(s,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){},function(e,t,r){var n;function s(e){this.rand=e}if(e.exports=function(e){return n||(n=new s(null)),n.generate(e)},e.exports.Rand=s,s.prototype.generate=function(e){return this._rand(e)},s.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=r(23);if("function"!=typeof i.randomBytes)throw new Error("Not supported");s.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){}},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,r){(function(t){var n=r(5),s=new(r(10)),i=new n(24),a=new n(11),o=new n(10),c=new n(3),u=new n(7),h=r(7),f=r(8);function l(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._pub=new n(e),this}function d(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._priv=new n(e),this}e.exports=m;var p={};function m(e,t,r){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=l,this.setPrivateKey=d):this._primeCode=8}function w(e,r){var n=new t(e.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in p)return p[n];var f,l=0;if(e.isEven()||!h.simpleSieve||!h.fermatTest(e)||!s.test(e))return l+=1,l+="02"===r||"05"===r?8:4,p[n]=l,l;switch(s.test(e.shrn(1))||(l+=2),r){case"02":e.mod(i).cmp(a)&&(l+=8);break;case"05":(f=e.mod(o)).cmp(c)&&f.cmp(u)&&(l+=8);break;default:l+=4}return p[n]=l,l}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var r=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),s=new t(r.toArray()),i=this.getPrime();if(s.length<i.length){var a=new t(i.length-s.length);a.fill(0),s=t.concat([a,s])}return s},m.prototype.getPublicKey=function(e){return w(this._pub,e)},m.prototype.getPrivateKey=function(e){return w(this._priv,e)},m.prototype.getPrime=function(e){return w(this.__prime,e)},m.prototype.getGenerator=function(e){return w(this._gen,e)},m.prototype.setGenerator=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.__gen=e,this._gen=new n(e),this}}).call(this,r(4).Buffer)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(s.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(s.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(27),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(3))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,s,i,a,o,c=1,u={},h=!1,f=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(s=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(a+t,"*")}),l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return u[c]=s,n(c),c++},l.clearImmediate=d}function d(e){delete u[e]}function p(e){if(h)setTimeout(p,0,e);else{var t=u[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(3),r(9))},function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),i=r(0),a=r.n(i),o=200,c=400,u=401,h=402,f=403,l=404,d=409,p=429,m=500,w=503,g=504,b=1012,y=3e3,v=3001;class M extends Error{constructor(...e){super(...e),this.name="UsernameAlreadyExists",this.message="Username already exists.",this.status=d}}class S extends Error{constructor(...e){super(...e),this.name="UsernameMissing",this.message="Username missing.",this.status=c}}class I extends Error{constructor(...e){super(...e),this.name="UsernameCannotBeBlank",this.message="Username cannot be blank.",this.status=c}}class P extends Error{constructor(e,...t){super(e,...t),this.name="UsernameTooLong",this.message="Username too long. Must be a max of ".concat(e," characters."),this.status=c}}class U extends Error{constructor(...e){super(...e),this.name="UsernameMustBeString",this.message="Username must be a string.",this.status=c}}class E extends Error{constructor(...e){super(...e),this.name="PasswordMissing",this.message="Password missing.",this.status=c}}class T extends Error{constructor(...e){super(...e),this.name="PasswordCannotBeBlank",this.message="Password cannot be blank.",this.status=c}}class A extends Error{constructor(e,...t){super(e,...t),this.name="PasswordTooShort",this.message="Password too short. Must be a minimum of ".concat(e," characters."),this.status=c}}class B extends Error{constructor(e,...t){super(e,...t),this.name="PasswordTooLong",this.message="Password too long. Must be a max of ".concat(e," characters."),this.status=c}}class x extends Error{constructor(...e){super(...e),this.name="PasswordMustBeString",this.message="Password must be a string.",this.status=c}}class N extends Error{constructor(e,...t){super(e,...t),this.name="PasswordAttemptLimitExceeded",this.message="Password attempt limit exceeded. Must wait ".concat(e," to attempt to use password again."),this.status=u}}class k extends Error{constructor(...e){super(...e),this.name="UsernameOrPasswordMismatch",this.message="Username or password mismatch.",this.status=u}}class _ extends Error{constructor(e,...t){super(...t),this.name="UserAlreadySignedIn",this.message="Already signed in.",this.status=c,this.username=e}}class O extends Error{constructor(...e){super(...e),this.name="UserPendingDeletion",this.message="User is pending deletion.",this.status=f}}class C extends Error{constructor(...e){super(...e),this.name="AppIdNotValid",this.message="App ID not valid.",this.status=u}}class R extends Error{constructor(...e){super(...e),this.name="UserNotSignedIn",this.message="Not signed in.",this.status=c}}class D extends Error{constructor(...e){super(...e),this.name="UserNotFound",this.message="User not found.",this.status=l}}class L extends Error{constructor(...e){super(...e),this.name="UserEmailNotFound",this.message="User does not have an email saved.",this.status=l}}class j extends Error{constructor(...e){super(...e),this.name="EmailNotValid",this.message="Email not valid.",this.status=c}}class K extends Error{constructor(...e){super(...e),this.name="ProfileMustBeObject",this.message="Profile must be a flat JSON object.",this.status=c}}class q extends Error{constructor(...e){super(...e),this.name="ProfileCannotBeEmpty",this.message="Profile cannot be empty.",this.status=c}}class F extends Error{constructor(e,...t){super(e,...t),this.name="ProfileHasTooManyKeys",this.message="Profile has too many keys. Must have a max of ".concat(e," keys."),this.status=c}}class H extends Error{constructor(e,t,...r){super(e,t,...r),this.name="ProfileKeyTooLong",this.message="Profile key too long. Must be a max of ".concat(e," characters."),this.status=c,this.key=t}}class V extends Error{constructor(e,t,...r){super(e,t,...r),this.name="ProfileValueMustBeString",this.message="Profile value must be a string.",this.status=c,this.key=e,this.value=t}}class Y extends Error{constructor(e,...t){super(e,...t),this.name="ProfileValueCannotBeBlank",this.message="Profile value cannot be blank.",this.status=c,this.key=e}}class G extends Error{constructor(e,t,r,...n){super(e,t,r,...n),this.name="ProfileValueTooLong",this.message="Profile value too long. Must be a max of ".concat(e," characters."),this.status=c,this.key=t,this.value=r}}class J extends Error{constructor(e,...t){super(e,...t),this.name="RememberMeValueNotValid",this.message="Remember me value must be one of ".concat(JSON.stringify(Object.keys(e)),"."),this.status=c}}class Z extends Error{constructor(...e){super(...e),this.name="ParamsMissing",this.message="Parameters expected are missing.",this.status=c}}class z extends Error{constructor(...e){super(...e),this.name="TrialExceededLimit",this.message="Trial exceeded limit of users.",this.status=h}}class W extends Error{constructor(...e){super(...e),this.name="CurrentPasswordMissing",this.message="Current password missing.",this.status=c}}class X extends Error{constructor(...e){super(...e),this.name="CurrentPasswordIncorrect",this.message="Current password is incorrect.",this.status=u}}class Q extends Error{constructor(e,...t){super(e,...t),this.name="KeyNotFound",this.message=e,this.status=l}}class $ extends Error{constructor(...e){super(...e),this.name="DatabaseNameMissing",this.message="Database name missing.",this.status=c}}class ee extends Error{constructor(...e){super(...e),this.name="DatabaseNameCannotBeBlank",this.message="Database name cannot be blank.",this.status=c}}class te extends Error{constructor(...e){super(...e),this.name="DatabaseNameMustBeString",this.message="Database name must be a string.",this.status=c}}class re extends Error{constructor(e,...t){super(e,...t),this.name="DatabaseNameTooLong",this.message="Database name cannot be more than ".concat(e," characters."),this.status=c}}class ne extends Error{constructor(...e){super(...e),this.name="DatabaseAlreadyOpening",this.message="Already attempting to open database.",this.status=c}}class se extends Error{constructor(...e){super(...e),this.name="ChangeHandlerMissing",this.message="Change handler missing.",this.status=c}}class ie extends Error{constructor(...e){super(...e),this.name="ChangeHandlerMustBeFunction",this.message="Change handler must be a function.",this.status=c}}class ae extends Error{constructor(...e){super(...e),this.name="DatabaseNotOpen",this.message="Database is not open.",this.status=c}}class oe extends Error{constructor(...e){super(...e),this.name="ItemMissing",this.message="Item missing.",this.status=c}}class ce extends Error{constructor(...e){super(...e),this.name="ItemInvalid",this.message="Item must be serializable to JSON.",this.status=c}}class ue extends Error{constructor(e,...t){super(e,...t),this.name="ItemTooLarge",this.message="Item must be less than ".concat(e," KB."),this.status=c}}class he extends Error{constructor(...e){super(...e),this.name="ItemIdMustBeString",this.message="Item id must be a string.",this.status=c}}class fe extends Error{constructor(e,...t){super(e,...t),this.name="ItemIdTooLong",this.message="Item id cannot be more than ".concat(e," characters."),this.status=c}}class le extends Error{constructor(...e){super(...e),this.name="ItemIdMissing",this.message="Item id missing.",this.status=c}}class de extends Error{constructor(...e){super(...e),this.name="ItemIdCannotBeBlank",this.message="Item id cannot be blank.",this.status=c}}class pe extends Error{constructor(...e){super(...e),this.name="ItemAlreadyExists",this.message="Item with the same id already exists.",this.status=d}}class me extends Error{constructor(...e){super(...e),this.name="ItemDoesNotExist",this.message="Item with the provided id does not exist.",this.status=l}}class we extends Error{constructor(...e){super(...e),this.name="ItemUpdateConflict",this.message="Item update conflict.",this.status=d}}class ge extends Error{constructor(...e){super(...e),this.name="OperationsMissing",this.message="Operations missing.",this.status=c}}class be extends Error{constructor(...e){super(...e),this.name="OperationsMustBeArray",this.message="Operations provided must be an array.",this.status=c}}class ye extends Error{constructor(e,...t){super(e,...t),this.name="CommandNotRecognized",this.message="Command '".concat(e,"' not recognized."),this.status=c}}class ve extends Error{constructor(...e){super(...e),this.name="OperationsConflict",this.message="Operations conflict. Only allowed 1 operation per item.",this.status=d}}class Me extends Error{constructor(e,...t){super(e,...t),this.name="OperationsExceedLimit",this.message="Operations exceed limit. Only allowed ".concat(e," operations."),this.status=c}}class Se extends Error{constructor(e,...t){super(e,...t),this.name="AppIdAlreadySet",this.message="Application ID already set.",this.status=d,this.appId=e}}class Ie extends Error{constructor(...e){super(...e),this.name="AppIdMustBeString",this.message="Application ID must be a string.",this.status=c}}class Pe extends Error{constructor(...e){super(...e),this.name="AppIdMissing",this.message="Application ID missing.",this.status=c}}class Ue extends Error{constructor(...e){super(...e),this.name="AppIdCannotBeBlank",this.message="Application ID cannot be blank.",this.status=c}}class Ee extends Error{constructor(...e){super(...e),this.name="WebCryptoUnavailable",this.message="The WebCrypto API is unavailable. Please make sure your website uses https.",this.status=c}}class Te extends Error{constructor(...e){super(...e),this.name="SuccessUrlMissing",this.message="Success url missing to let Stripe know where to redirect users on successful payment.",this.status=c}}class Ae extends Error{constructor(...e){super(...e),this.name="SuccessUrlMustBeString",this.message="Success url must be a string.",this.status=c}}class Be extends Error{constructor(e,...t){super(e,...t),this.name="SuccessUrlInvalid",this.message=e?"Success url must start with http or https.":"Success url invalid.",this.status=c}}class xe extends Error{constructor(...e){super(...e),this.name="CancelUrlMissing",this.message="Cancel url missing to let Stripe know where to redirect users on cancelled payment.",this.status=c}}class Ne extends Error{constructor(...e){super(...e),this.name="CancelUrlMustBeString",this.message="Cancel url must be a string.",this.status=c}}class ke extends Error{constructor(e,...t){super(e,...t),this.name="CancelUrlInvalid",this.message=e?"Cancel url must start with http or https.":"Cancel url invalid.",this.status=c}}class _e extends Error{constructor(...e){super(...e),this.name="StripeLibraryMissing",this.message="Stripe.js library missing. Be sure to include the script in your html file (https://stripe.com/docs/stripe-js#setup).",this.status=c}}class Oe extends Error{constructor(...e){super(...e),this.name="PaymentsDisabled",this.message="Payments on this app are disabled. Enable payments in the admin panel.",this.status=f}}class Ce extends Error{constructor(...e){super(...e),this.name="SubscriptionPlanNotSet",this.message="Subscription plan not set. Set the subscription plan in the admin panel.",this.status=f}}class Re extends Error{constructor(...e){super(...e),this.name="SubscriptionPlanAlreadyPurchased",this.message="Subscription plan already purchased.",this.status=d}}class De extends Error{constructor(...e){super(...e),this.name="StripeAccountNotConnected",this.message="Stripe account not connected. Connect a Stripe account in the admin panel.",this.status=f}}class Le extends Error{constructor(...e){super(...e),this.name="SubscriptionNotFound",this.message="Subscription not found. User must purchase a subscription.",this.status=h}}class je extends Error{constructor(...e){super(...e),this.name="SubscribedToIncorrectPlan",this.message="Subscribed to the incorrect subscription plan. The user must purchase the app's current subscription plan.",this.status=h}}class Ke extends Error{constructor(e,...t){super(...t),this.name="SubscriptionInactive",this.message="The user's subscription is inactive.",this.subscriptionStatus=e,this.status=h}}class qe extends Error{constructor(...e){super(...e),this.name="SubscriptionNotPurchased",this.message="Subscription not purchased. User must purchase a subscription.",this.status=h}}class Fe extends Error{constructor(...e){super(...e),this.name="SubscriptionAlreadyCanceled",this.message="Subscription already canceled. User must purchase a new subscription.",this.status=c}}class He extends Error{constructor(...e){super(...e),this.name="TrialExpired",this.message="Trial expired. User must purchase a subscription.",this.status=h}}class Ve extends Error{constructor(e,...t){super(e,...t);const{status:r,type:n,message:s}=e;this.name="StripeError",this.message=s,this.type=n,this.status=r}}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class Ge extends Error{constructor(...e){super(...e),this.name="AppIdNotSet",this.message="App ID not set yet. Make sure to configure app ID.",this.status=c}}class Je extends Error{constructor(...e){super(...e),this.name="ServiceUnavailable",this.message="Service unavailable.",this.status=w}}class Ze extends Error{constructor(...e){super(...e),this.name="ParamsMustBeObject",this.message="Parameters passed to function must be placed inside an object.",this.status=c}}class ze extends Error{constructor(e,...t){super(e,...t);const r=Math.floor(e/1e3);this.name="TooManyRequests",this.message="Too many requests in a row. Please try again in ".concat(r," second").concat(1!==r?"s":"","."),this.status=p}}var We=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{UsernameAlreadyExists:M,UsernameMissing:S,UsernameCannotBeBlank:I,UsernameTooLong:P,UsernameMustBeString:U,PasswordMissing:E,PasswordCannotBeBlank:T,PasswordTooShort:A,PasswordTooLong:B,PasswordMustBeString:x,PasswordAttemptLimitExceeded:N,UsernameOrPasswordMismatch:k,UserAlreadySignedIn:_,UserPendingDeletion:O,AppIdNotValid:C,UserNotSignedIn:R,UserNotFound:D,UserEmailNotFound:L,EmailNotValid:j,ProfileMustBeObject:K,ProfileCannotBeEmpty:q,ProfileHasTooManyKeys:F,ProfileKeyTooLong:H,ProfileValueMustBeString:V,ProfileValueCannotBeBlank:Y,ProfileValueTooLong:G,RememberMeValueNotValid:J,ParamsMissing:Z,TrialExceededLimit:z,CurrentPasswordMissing:W,CurrentPasswordIncorrect:X,KeyNotFound:Q},{},{DatabaseNameMissing:$,DatabaseNameCannotBeBlank:ee,DatabaseNameMustBeString:te,DatabaseNameTooLong:re,DatabaseAlreadyOpening:ne,ChangeHandlerMissing:se,ChangeHandlerMustBeFunction:ie,DatabaseNotOpen:ae,ItemMissing:oe,ItemInvalid:ce,ItemTooLarge:ue,ItemIdMustBeString:he,ItemIdTooLong:fe,ItemIdMissing:le,ItemIdCannotBeBlank:de,ItemAlreadyExists:pe,ItemDoesNotExist:me,ItemUpdateConflict:we,OperationsMissing:ge,OperationsMustBeArray:be,OperationsConflict:ve,OperationsExceedLimit:Me,CommandNotRecognized:ye},{},{AppIdAlreadySet:Se,AppIdMustBeString:Ie,AppIdMissing:Pe,AppIdCannotBeBlank:Ue,WebCryptoUnavailable:Ee},{},{SuccessUrlMissing:Te,SuccessUrlMustBeString:Ae,SuccessUrlInvalid:Be,CancelUrlMissing:xe,CancelUrlMustBeString:Ne,CancelUrlInvalid:ke,StripeJsLibraryMissing:_e,PaymentsDisabled:Oe,SubscriptionPlanNotSet:Ce,SubscriptionPlanAlreadyPurchased:Re,StripeAccountNotConnected:De,SubscriptionNotFound:Le,SubscribedToIncorrectPlan:je,SubscriptionInactive:Ke,SubscriptionNotPurchased:qe,SubscriptionAlreadyCanceled:Fe,TrialExpired:He,StripeError:Ve},{AppIdNotSet:Ge,InternalServerError:class extends Je{constructor(...e){super(...e),this.status=m}},ServiceUnavailable:Je,Timeout:class extends Je{constructor(...e){super(...e),this.status=g}},Reconnecting:class extends Je{constructor(...e){super(...e),this.message="Reconnecting."}},UnknownServiceUnavailable:class extends Je{constructor(e,...t){super(e,...t),console.error("Userbase error. Please report this to support@userbase.com.\n\n",e)}},ParamsMustBeObject:Ze,TooManyRequests:ze});let Xe=null;var Qe={local:!0,session:!0,none:!0},$e=()=>{if(!Xe)throw new We.AppIdNotSet;return Xe},et=()=>window._userbaseEndpoint||"https://v1.userbase.com/v1",tt=({appId:e})=>{(e=>{if(Xe&&Xe!==e)throw new We.AppIdAlreadySet(Xe);if("string"!=typeof e)throw new We.AppIdMustBeString;if(0===e.length)throw new We.AppIdCannotBeBlank;Xe=e})(e)},rt=e=>e?window._USERBASE_STRIPE_PRODUCTION_PUBLISHABLE_KEY||"pk_live_jI6lbsAIQlu2u4uTkDXFrSEW":window._USERBASE_STRIPE_TEST_PUBLISHABLE_KEY||"pk_test_rYANrLdNfdJXJ2d808wW4pqY";class nt extends Error{constructor(e,t,r,...n){super(e,t,r,...n),this.response={data:e,status:t,statusText:r},this.message="Request failed with status code "+t}}class st extends Error{constructor(e,...t){super(e,...t),this.message="timeout of ".concat(e,"ms exceeded")}}const it=(e,t,r)=>{e.timeout=1e4,e.onload=()=>((e,t,r)=>{let n;try{n=JSON.parse(e.response)}catch(t){n=e.response}e.status>=200&&e.status<300?t(n):r(new nt(n,e.status,e.statusText))})(e,t,r),e.onerror=()=>r(new We.ServiceUnavailable),e.ontimeout=()=>r(new st(1e4))};var at={signUp:(e,t,r,n,s,i,a,o)=>new Promise((c,u)=>{const h=new XMLHttpRequest,f="".concat(et(),"/api/auth/sign-up?appId=").concat($e()),l=JSON.stringify({username:e,passwordToken:t,publicKey:r,passwordSalts:n,keySalts:s,email:i,profile:a,passwordBasedBackup:o});h.open("POST",f),h.setRequestHeader("Content-Type","application/json"),h.send(l),it(h,c,u)}),getPasswordSalts:e=>new Promise((t,r)=>{const n=new XMLHttpRequest,s="".concat(et(),"/api/auth/get-password-salts?appId=").concat($e(),"&username=").concat(encodeURIComponent(e));n.open("GET",s),n.send(),it(n,t,r)}),signIn:async(e,t)=>new Promise((r,n)=>{const s=new XMLHttpRequest,i="".concat(et(),"/api/auth/sign-in?appId=").concat($e()),a=JSON.stringify({username:e,passwordToken:t});s.open("POST",i),s.setRequestHeader("Content-Type","application/json"),s.send(a),it(s,r,n)}),signInWithSession:e=>new Promise((t,r)=>{const n=new XMLHttpRequest,s="".concat(et(),"/api/auth/sign-in-with-session?appId=").concat($e(),"&sessionId=").concat(e);n.open("POST",s),n.send(),it(n,t,r)}),getServerPublicKey:async()=>new Promise((e,t)=>{const r=new XMLHttpRequest,n="".concat(et(),"/api/auth/server-public-key");r.open("GET",n),r.responseType="arraybuffer",r.send(),it(r,e,t)})},ot=r(2),ct=r.n(ot),ut=r(6),ht=r.n(ut);function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dt=e=>(...t)=>{try{return e(...t)}catch(e){console.warn("Error accessing browser storage. Defaulting to memory.\n\n",e)}},pt=(e,t)=>"userbaseSeed.".concat(e,".").concat(t),mt=dt((e,t,r,n,s,i)=>{const a={username:t,signedIn:r,sessionId:n,creationDate:s,expirationDate:i},o=JSON.stringify(a);"local"===e?localStorage.setItem("userbaseCurrentSession",o):"session"===e&&sessionStorage.setItem("userbaseCurrentSession",o)});var wt={signInSession:(e,t,r,n,s)=>{mt(e,t,!0,r,n,s)},signOutSession:(e,t)=>{mt(e,t,!1)},getCurrentSession:dt(()=>{const e=sessionStorage.getItem("userbaseCurrentSession");if(e){if(!JSON.parse(e).signedIn){const e=localStorage.getItem("userbaseCurrentSession");if(e){const t=JSON.parse(e);if(t.signedIn)return lt({},t,{rememberMe:"local"})}}return lt({},JSON.parse(e),{rememberMe:"session"})}const t=localStorage.getItem("userbaseCurrentSession");return t&&lt({},JSON.parse(t),{rememberMe:"local"})}),saveSeedString:dt((e,t,r,n)=>{"local"===e?localStorage.setItem(pt(t,r),n):"session"===e&&sessionStorage.setItem(pt(t,r),n)}),removeSeedString:dt((e,t)=>{const r=pt(e,t);sessionStorage.removeItem(r),localStorage.removeItem(r)}),getSeedString:dt((e,t)=>{const r=pt(e,t);return sessionStorage.getItem(r)||localStorage.getItem(r)}),removeCurrentSession:dt(()=>{sessionStorage.removeItem("userbaseCurrentSession"),localStorage.removeItem("userbaseCurrentSession")})};const gt=e=>{let t=new ArrayBuffer(2*e.length),r=new Uint16Array(t);for(let t=0,n=e.length;t<n;t++)r[t]=e.charCodeAt(t);return t},bt=async e=>await window.crypto.subtle.digest({name:"SHA-256"},e);var yt={BYTE_SIZE:32,HASH_ALGORITHM_NAME:"SHA-256",hash:bt,hashBase64String:async e=>{const t=a.a.decode(e),r=await bt(t);return a.a.encode(r)},hashString:async e=>{const t=gt(e),r=await bt(t);return a.a.encode(r)}};const vt=["deriveKey","deriveBits"],Mt=async e=>await window.crypto.subtle.importKey("raw",e,{name:"HKDF"},!1,vt),St=yt.BYTE_SIZE,It=(e,t)=>({name:"HKDF",info:gt(e),hash:yt.HASH_ALGORITHM_NAME,salt:t});var Pt={importHkdfKeyFromString:async e=>{const t=gt(e);return await Mt(t)},importHkdfKey:Mt,generateSalt:()=>window.crypto.getRandomValues(new Uint8Array(St)),getParams:It,getPasswordToken:async(e,t)=>{const r=await window.crypto.subtle.deriveBits(It("password-token",t),e,256);return a.a.encode(r)}};const Ut=["encrypt","decrypt"],Et=()=>"undefined"!=typeof window?window:self,Tt=()=>({name:"AES-GCM",length:256}),At=async e=>await Et().crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,Ut),Bt=async(e,t)=>{const r=Et().crypto.getRandomValues(new Uint8Array(12));return((e,t)=>{const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer})(await Et().crypto.subtle.encrypt({name:"AES-GCM",iv:r,tagLength:128},e,t),r)},xt=async(e,t)=>{const r=gt(t),n=await Bt(e,r);return a.a.encode(n)},Nt=async(e,t)=>{const r=t.byteLength-12,n=t.slice(0,r),s=t.slice(r);return await Et().crypto.subtle.decrypt({name:"AES-GCM",iv:s,tagLength:128},e,n)},kt=async(e,t)=>{const r=a.a.decode(t);return(e=>{const t=new Uint16Array(e),r=t.length;let n="",s=10240;for(var i=0;i<r;i+=s){i+s>r&&(s=r-i);const e=t.subarray(i,i+s);n+=String.fromCharCode.apply(null,e)}return n})(await Nt(e,r))};var _t={getEncryptionKeyParams:Tt,importKeyFromMaster:async(e,t)=>await window.crypto.subtle.deriveKey(Pt.getParams("encryption",t),e,{name:"AES-GCM",length:256},!0,Ut),generateKey:async()=>await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,Ut),getKeyStringFromKey:async e=>{const t=await window.crypto.subtle.exportKey("raw",e);return a.a.encode(t)},getKeyFromKeyString:async e=>{const t=a.a.decode(e);return await At(t)},getRawKeyFromKey:async e=>await Et().crypto.subtle.exportKey("raw",e),getKeyFromRawKey:At,encrypt:Bt,encryptJson:async(e,t)=>{const r=JSON.stringify(t);return await xt(e,r)},encryptString:xt,decrypt:Nt,decryptJson:async(e,t)=>{const r=await kt(e,t);return JSON.parse(r)},decryptString:kt,getPasswordBasedEncryptionKey:async(e,t)=>await window.crypto.subtle.deriveKey(Pt.getParams("password-based-encryption",t),e,{name:"AES-GCM",length:256},!1,Ut)},Ot=r(11),Ct=r.n(Ot);const Rt=["encrypt"],Dt=(e=>{if(e.length%2!=0)throw new Error("Hex string must be even length");const t=e.length/2,r=[];for(let n=0;n<t;n++){const t=2*n,s=e.substring(t,t+2),i=parseInt(s,16);r.push(i)}return new Uint8Array(r)})("ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"),Lt=[2];let jt=null;const Kt=e=>((e,t)=>(e.setPrivateKey(t),e.generateKeys(),e))(Ct.a.createDiffieHellman(Dt,Lt),e),qt=async(e,t)=>{const r=Kt(e).computeSecret(t),n=await yt.hash(r);return await _t.getKeyFromRawKey(n)};var Ft={getPublicKey:e=>Kt(e).getPublicKey(),getSharedKey:qt,getSharedKeyWithServer:async e=>await qt(e,new Uint8Array(await(async()=>jt||(jt=await at.getServerPublicKey(),jt))())),importKeyFromMaster:async(e,t)=>{const r=await window.crypto.subtle.deriveKey(Pt.getParams("diffie-hellman",t),e,_t.getEncryptionKeyParams(),!0,Rt);return await _t.getRawKeyFromKey(r)}};const Ht=["sign"],Vt=async(e,t)=>await window.crypto.subtle.sign({name:"HMAC"},e,t);var Yt={importKeyFromMaster:async(e,t)=>await window.crypto.subtle.deriveKey(Pt.getParams("authentication",t),e,{name:"HMAC",hash:{name:yt.HASH_ALGORITHM_NAME}},!1,Ht),sign:Vt,signString:async(e,t)=>{const r=await Vt(e,gt(t));return a.a.encode(r)}},Gt=r(12),Jt=r.n(Gt);var Zt={generateSeed:()=>window.crypto.getRandomValues(new Uint8Array(32)),aesGcm:_t,diffieHellman:Ft,sha256:yt,hmac:Yt,hkdf:Pt,scrypt:{generateSalt:()=>window.crypto.getRandomValues(new Uint8Array(16)),hash:async(e,t)=>{const r=new Uint8Array(gt(e)),n=await Jt.a.scrypt(r,t,16384,8,1,32);return a.a.encode(n)}}};const zt=e=>e.split(":")[0],Wt=e=>{const t=(e=>"http://"===e.substring(0,"http://".length)?e.substring("http://".length):"https://"===e.substring(0,"https://".length)?e.substring("https://".length):e)(e);return("https"===zt(e)?"wss://":"ws://")+t},Xt=e=>2*e.length,Qt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function $t(){let e=[],t=0;this.getLength=()=>e.length-t,this.isEmpty=()=>0===e.length,this.enqueue=t=>(e.push(t),this.getLength()),this.dequeue=()=>{const r=e[t];return t+=1,2*t>e.length&&(e=e.slice(t),t=0),r},this.peek=()=>e[t]}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const rr=ct()();class nr extends Error{constructor(e,t,...r){super(...r),this.name="RequestFailed: ".concat(e),this.message=t.message,this.status=t.status||"timeout"===t.message&&g,this.response=t.status&&t}}class sr extends Error{constructor(e,t,...r){super(...r),this.name="WebSocket error",this.message=e,this.username=t}}var ir=new class{constructor(){this.init()}init(e,t,r,n,s,i){this.pingTimeout&&clearTimeout(this.pingTimeout);for(const e of Object.keys(this))delete this[e];this.ws=null,this.connected=!1,this.resolveConnection=e,this.rejectConnection=t,this.connectionResolved=!1,this.session={username:r&&r.username,sessionId:r&&r.sessionId,creationDate:r&&r.creationDate,authToken:r&&r.authToken},this.seedString=n,this.keys={init:!1,salts:{}},this.userData={stripeData:{}},this.rememberMe=s,this.requests={},this.state=i||{databases:{},dbIdToHash:{},dbNameToHash:{}}}connect(e,t=null,r,n,s){if(this.connected)throw new sr("Web Socket already connected",this.session.username);return new Promise((i,a)=>{let c=!1;const u=setTimeout(()=>{this.connected||this.reconnecting||(c=!0,a(new sr("timeout")))},1e4),h="".concat(Wt(et()),"/api?appId=").concat($e(),"&sessionId=").concat(e.sessionId,"&clientId=").concat(rr),f=new WebSocket(h);f.onopen=async()=>{c||clearTimeout(u)},f.onmessage=async n=>{if(!c)try{const c=JSON.parse(n.data);switch(c.route){case"Ping":{this.heartbeat();const e="Pong";this.ws.send(JSON.stringify({action:e}));break}case"Connection":{this.init(i,a,e,t,r,s),this.ws=f,this.heartbeat(),this.connected=!0;const{keySalts:n,encryptedValidationMessage:o}=c;this.keys.salts=n,this.encryptedValidationMessage=new Uint8Array(o.data),await this.setKeys(this.seedString);break}case"ApplyTransactions":{const e=c.dbId,t=c.dbNameHash||this.state.dbIdToHash[e],r=this.state.databases[t];if(!r)throw new Error("Missing database");if(r.applyTransactionsQueue.isEmpty()?r.applyTransactionsQueue.enqueue(null):await new Promise(e=>{const t=e;r.applyTransactionsQueue.enqueue(t)}),c.dbNameHash&&c.dbKey){const e=await Zt.aesGcm.decryptString(this.keys.encryptionKey,c.dbKey);r.dbKeyString=e,r.dbKey=await Zt.aesGcm.getKeyFromKeyString(e)}if(!r.dbKey)throw new Error("Missing db key");if(c.bundle){const e=c.bundleSeqNo,t=c.bundle,n=await Zt.aesGcm.decryptString(r.dbKey,t),s=ht.a.decompress(n),i=JSON.parse(s);r.applyBundle(i,e)}const n=c.transactionLog;if(await r.applyTransactions(n),r.init||(this.state.dbIdToHash[e]=t,r.dbId=e,r.init=!0,r.receivedMessage()),c.buildBundle&&this.buildBundle(r),r.applyTransactionsQueue.dequeue(),!r.applyTransactionsQueue.isEmpty()){r.applyTransactionsQueue.peek()()}break}case"SignOut":case"UpdateUser":case"DeleteUser":case"CreateDatabase":case"GetDatabase":case"OpenDatabase":case"GetDatabases":case"Insert":case"Update":case"Delete":case"BatchTransaction":case"Bundle":case"ValidateKey":case"GetPasswordSalts":case"PurchaseSubscription":case"CancelSubscription":case"ResumeSubscription":case"UpdatePaymentMethod":{const e=c.requestId;if(!e)return console.warn("Missing request id");const t=this.requests[e];if(!t)return console.warn("Request ".concat(e," no longer exists!"));if(!t.promiseResolve||!t.promiseReject)return;const r=c.response;return r&&r.status===o?t.promiseResolve(r):t.promiseReject(r)}default:console.log("Received unknown message from backend:"+JSON.stringify(c))}}catch(n){this.connectionResolved?console.warn("Error handling message: ",n):(this.close(),a(new sr(n.message,e.username)))}},f.onclose=async o=>{if(c)return;const u=o.code===b,h=o.code===y;if(u||h||!o.wasClean){const o=u&&!n?0:n?n+1e3:1e3;this.reconnecting=!0,await this.reconnect(i,a,e,t,r,o,!this.reconnected&&s)}else o.code===v?a(new sr("Web Socket already connected",e.username)):this.init()}})}async reconnect(e,t,r,n,s,i,a){try{const t=Math.min(i,3e4);console.log("Connection to server lost. Attempting to reconnect in ".concat(t/1e3," second").concat(1e3!==t?"s":"","..."));const o=[];e(await new Promise((e,c)=>setTimeout(async()=>{try{const t=a||{databases:tr({},this.state.databases),dbIdToHash:tr({},this.state.dbIdToHash),dbNameToHash:tr({},this.state.dbNameToHash)};for(const e in t.databases)t.databases[e].init=!1,o.push(e);this.init(),this.reconnecting=!0;const c=await this.connect(r,n,s,i,t);this.reconnected=!0,a||await this.reopenDatabases(o,1e3),e(c)}catch(e){c(e)}},t)))}catch(e){t(e)}}async reopenDatabases(e,t){try{const t=[];for(const r of e){const e=this.state.databases[r];if(!e.init){const n="OpenDatabase",s={dbNameHash:r,reopenAtSeqNo:e.lastSeqNo};t.push(this.request(n,s))}}await Promise.all(t)}catch(r){await new Promise(r=>setTimeout(async()=>{await this.reopenDatabases(e,t+1e3),r()},Math.min(t,3e4)))}}heartbeat(){clearTimeout(this.pingTimeout);this.pingTimeout=setTimeout(()=>{this.ws&&this.ws.close(y)},33e3)}close(e){this.ws?this.ws.close(e):this.init()}async signOut(){const e=this.session.username,t=this.connectionResolved,r=this.rejectConnection;try{wt.signOutSession(this.rememberMe,e);const n=this.session.sessionId;if(this.reconnecting)throw new We.Reconnecting;const s="SignOut",i={sessionId:n};await this.request(s,i),this.close(),!t&&r&&r(new sr("Canceled",e))}catch(n){throw!t&&r&&r(new sr("Canceled",e)),n}}async setKeys(e){if(this.keys.init)return;if(!e)throw new sr("Missing seed",this.session.username);if(!this.keys.salts)throw new sr("Missing salts",this.session.username);this.seedString||(this.seedString=e);const t=a.a.decode(e),r=await Zt.hkdf.importHkdfKey(t),n=this.keys.salts;this.keys.encryptionKey=await Zt.aesGcm.importKeyFromMaster(r,a.a.decode(n.encryptionKeySalt)),this.keys.dhPrivateKey=await Zt.diffieHellman.importKeyFromMaster(r,a.a.decode(n.dhKeySalt)),this.keys.hmacKey=await Zt.hmac.importKeyFromMaster(r,a.a.decode(n.hmacKeySalt));const s=await this.validateKey();this.userData=s,this.keys.init=!0,this.resolveConnection(),this.connectionResolved=!0}async validateKey(){const e=await Zt.diffieHellman.getSharedKeyWithServer(this.keys.dhPrivateKey),t={validationMessage:a.a.encode(await Zt.aesGcm.decrypt(e,this.encryptedValidationMessage))};return(await this.request("ValidateKey",t)).data}async request(e,t){const r=ct()();this.requests[r]={};const n=this.watch(r);this.ws.send(JSON.stringify({requestId:r,action:e,params:t}));try{return await n}catch(t){throw t.status===p?new We.TooManyRequests(t.data.retryDelay):new nr(e,t)}}async watch(e){const t=await new Promise((t,r)=>{this.requests[e].promiseResolve=t,this.requests[e].promiseReject=r,setTimeout(()=>{r(new Error("timeout"))},1e4)});return delete this.requests[e],t}async buildBundle(e){const t={items:e.items,itemsIndex:e.itemsIndex.array},r=JSON.stringify(t),n=e.dbId,s=e.lastSeqNo,i=e.dbKey,a=[];for(let e=0;e<t.itemsIndex.length;e++){const r=t.itemsIndex[e].itemId;a.push(Zt.hmac.signString(this.keys.hmacKey,r))}const o=await Promise.all(a),c=ht.a.compress(r),u={dbId:n,seqNo:s,bundle:await Zt.aesGcm.encryptString(i,c),keys:o};this.request("Bundle",u)}};function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const cr=e=>{if(e.response){if("App ID not valid"===e.response.data)throw new We.AppIdNotValid;if("UserNotFound"===e.response.data)throw new We.UserNotFound;if(e.response.status===m)throw new We.InternalServerError;if(e.response.status===g)throw new We.Timeout}else if(e.message&&-1!==e.message.indexOf("timeout"))throw new We.Timeout},ur=async(e,t,r)=>{try{await ir.connect(e,t,r)}catch(e){if(cr(e),"Web Socket already connected"===e.message)throw new We.UserAlreadySignedIn(e.username);throw e}},hr=e=>{if(e.response&&"UsernameTooLong"===e.response.data.error)throw new We.UsernameTooLong(e.response.data.maxLen);if(e.response&&"PasswordAttemptLimitExceeded"===e.response.data.error)throw new We.PasswordAttemptLimitExceeded(e.response.data.delay)},fr=(e,t)=>{if(cr(e),hr(e),e.response){const r=e.response.data;switch(r){case"UsernameAlreadyExists":throw new We.UsernameAlreadyExists(t);case"TrialExceededLimit":throw new We.TrialExceededLimit;case"CurrentPasswordIncorrect":throw new We.CurrentPasswordIncorrect}switch(r.error){case"EmailNotValid":throw new We.EmailNotValid;case"ProfileMustBeObject":throw new We.ProfileMustBeObject;case"ProfileKeyTooLong":throw new We.ProfileKeyTooLong(r.maxLen,r.key);case"ProfileValueMustBeString":throw new We.ProfileValueMustBeString(r.key,r.value);case"ProfileValueCannotBeBlank":throw new We.ProfileValueCannotBeBlank(r.key);case"ProfileValueTooLong":throw new We.ProfileValueTooLong(r.maxLen,r.key,r.value);case"ProfileHasTooManyKeys":throw new We.ProfileHasTooManyKeys(r.maxKeys);case"ProfileCannotBeEmpty":throw new We.ProfileCannotBeEmpty}}throw e},lr=e=>{if("string"!=typeof e)throw new We.UsernameMustBeString;if(0===e.length)throw new We.UsernameCannotBeBlank},dr=e=>{if("string"!=typeof e)throw new We.PasswordMustBeString;if(0===e.length)throw new We.PasswordCannotBeBlank;if(e.length<6)throw new We.PasswordTooShort(6);if(e.length>1e3)throw new We.PasswordTooLong(1e3)},pr=e=>{if("object"!=typeof e)throw new We.ParamsMustBeObject;if(!Qt(e,"username"))throw new We.UsernameMissing;if(!Qt(e,"password"))throw new We.PasswordMissing;if(lr(e.username),dr(e.password),Qt(e,"rememberMe")&&!Qe[e.rememberMe])throw new We.RememberMeValueNotValid(Qe)},mr=async(e,t)=>{const r=Zt.scrypt.generateSalt(),n=await Zt.scrypt.hash(e,r),s=await Zt.hkdf.importHkdfKeyFromString(n),i=Zt.hkdf.generateSalt(),o=await Zt.hkdf.getPasswordToken(s,i),c=Zt.hkdf.generateSalt(),u=await Zt.aesGcm.getPasswordBasedEncryptionKey(s,c),h=await Zt.aesGcm.encrypt(u,t);return{passwordToken:o,passwordSalts:{passwordSalt:a.a.encode(r),passwordTokenSalt:a.a.encode(i)},passwordBasedBackup:{passwordBasedEncryptionKeySalt:a.a.encode(c),passwordEncryptedSeed:a.a.encode(h)}}},wr=({username:e,userId:t,authToken:r,email:n,profile:s,protectedProfile:i,usedTempPassword:a,userData:o})=>{const c={username:e,userId:t,authToken:r};if(n&&(c.email=n),s&&(c.profile=s),i&&(c.protectedProfile=i),a&&(c.usedTempPassword=a),o){const{creationDate:e,stripeData:t}=o;if(e&&(c.creationDate=e),t){const{paymentsMode:e,subscriptionStatus:r,cancelSubscriptionAt:n,trialExpirationDate:s}=t;e&&(c.paymentsMode=e),r&&(c.subscriptionStatus=r),n&&(c.cancelSubscriptionAt=n),s&&(c.trialExpirationDate=s)}}return c},gr=e=>{if("object"!=typeof e)throw new We.ProfileMustBeObject;let t=!1;for(const r in e){t=!0;const n=e[r];if("string"!=typeof n)throw new We.ProfileValueMustBeString(r,n);if(!n)throw new We.ProfileValueCannotBeBlank(r)}if(!t)throw new We.ProfileCannotBeEmpty},br=async()=>{try{const e="GetPasswordSalts";return(await ir.request(e)).data}catch(e){throw cr(e),e}},yr=async(e,t)=>{const{passwordSalt:r,passwordTokenSalt:n}=t,s=await Zt.scrypt.hash(e,new Uint8Array(a.a.decode(r))),i=await Zt.hkdf.importHkdfKeyFromString(s);return{passwordHkdfKey:i,passwordToken:await Zt.hkdf.getPasswordToken(i,a.a.decode(n))}},vr=async e=>{try{const t=wt.getCurrentSession();if(!t)return{};const{signedIn:r,sessionId:n,creationDate:s,expirationDate:i,rememberMe:a}=t,o=wt.getSeedString(e,t.username);if(!r||!o||new Date>new Date(i))return{lastUsedUsername:t.username};let c;try{c=await at.signInWithSession(n)}catch(e){if(cr(e),e.response&&"Session invalid"===e.response.data)return{lastUsedUsername:t.username};throw e}const{userId:u,authToken:h,username:f,email:l,profile:d,protectedProfile:p}=c;if(f!==t.username&&(wt.saveSeedString(a,e,f,o),wt.removeSeedString(e,t.username)),wt.signInSession(a,f,n,s,c.expirationDate),ir.connectionResolved){if(ir.session.sessionId===n)return{user:wr({username:f,userId:u,authToken:ir.session.authToken,email:l,profile:d,protectedProfile:p,userData:ir.userData})};throw new We.UserAlreadySignedIn(ir.session.username)}const m=or({},t,{authToken:h});return await ur(m,o,a),{user:wr({username:f,userId:u,authToken:h,email:l,profile:d,protectedProfile:p,userData:ir.userData})}}catch(e){throw cr(e),e}};var Mr={signUp:async e=>{try{(e=>{if(pr(e),e.profile&&gr(e.profile),e.email&&"string"!=typeof e.email)throw new We.EmailNotValid})(e);const{password:t,profile:r,rememberMe:n="session"}=e,s=e.username.toLowerCase(),i=e.email&&e.email.toLowerCase(),o=$e(),c=await Zt.generateSeed(),{sessionId:u,creationDate:h,expirationDate:f,userId:l,authToken:d}=await(async(e,t,r,n,s)=>{const{passwordToken:i,passwordSalts:o,passwordBasedBackup:c}=await mr(t,r),u=await Zt.hkdf.importHkdfKey(r),h=Zt.hkdf.generateSalt(),f=Zt.hkdf.generateSalt(),l=Zt.hkdf.generateSalt(),d=await Zt.diffieHellman.importKeyFromMaster(u,f),p=Zt.diffieHellman.getPublicKey(d),m={encryptionKeySalt:a.a.encode(h),dhKeySalt:a.a.encode(f),hmacKeySalt:a.a.encode(l)};try{return await at.signUp(e,i,p,o,m,n,s,c)}catch(t){fr(t,e)}})(s,t,c,i,r),p={username:s,sessionId:u,creationDate:h,expirationDate:f,authToken:d},m=a.a.encode(c);return wt.saveSeedString(n,o,s,m),wt.signInSession(n,s,u,h,f),await ur(p,m,n),wr({username:s,userId:l,authToken:d,email:i,profile:r,userData:ir.userData})}catch(e){switch(e.name){case"ParamsMustBeObject":case"UsernameMissing":case"UsernameAlreadyExists":case"UsernameCannotBeBlank":case"UsernameMustBeString":case"UsernameTooLong":case"PasswordMissing":case"PasswordCannotBeBlank":case"PasswordTooShort":case"PasswordTooLong":case"PasswordMustBeString":case"EmailNotValid":case"ProfileMustBeObject":case"ProfileCannotBeEmpty":case"ProfileHasTooManyKeys":case"ProfileKeyTooLong":case"ProfileValueMustBeString":case"ProfileValueCannotBeBlank":case"ProfileValueTooLong":case"RememberMeValueNotValid":case"TrialExceededLimit":case"AppIdNotSet":case"AppIdNotValid":case"UserAlreadySignedIn":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},signOut:async()=>{try{if(!ir.session.username)throw new We.UserNotSignedIn;try{await ir.signOut()}catch(e){throw cr(e),e}}catch(e){switch(e.name){case"UserNotSignedIn":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},signIn:async e=>{try{pr(e);const t=e.username.toLowerCase(),{password:r,rememberMe:n="session"}=e,s=$e(),i=await(async e=>{try{return await at.getPasswordSalts(e)}catch(e){if(cr(e),hr(e),e.response&&"User not found"===e.response.data)throw new We.UsernameOrPasswordMismatch;throw e}})(t),{passwordHkdfKey:o,passwordToken:c}=await yr(r,i),u=await(async(e,t)=>{try{return await at.signIn(e,t)}catch(e){if(cr(e),hr(e),e.response&&"Invalid password"===e.response.data)throw new We.UsernameOrPasswordMismatch;if(e.response&&"User pending deletion"===e.response.data)throw new We.UserPendingDeletion;throw e}})(t,c),{userId:h,email:f,profile:l,passwordBasedBackup:d,protectedProfile:p,usedTempPassword:m}=u,w=or({},u.session,{username:t}),g=wt.getSeedString(s,t);let b;if(!g&&m)throw new We.KeyNotFound("Your key was not found. You can only sign in with a temporary password from a device you've signed in from before.");g||(b=await(async(e,t)=>{const{passwordBasedEncryptionKeySalt:r,passwordEncryptedSeed:n}=t,s=await Zt.aesGcm.getPasswordBasedEncryptionKey(e,a.a.decode(r)),i=await Zt.aesGcm.decrypt(s,a.a.decode(n));return a.a.encode(i)})(o,d),wt.saveSeedString(n,s,t,b));const y=g||b;return wt.signInSession(n,t,w.sessionId,w.creationDate,w.expirationDate),await ur(w,y,n),wr({username:t,userId:h,authToken:w.authToken,email:f,profile:l,protectedProfile:p,usedTempPassword:m,userData:ir.userData})}catch(e){switch(e.name){case"ParamsMustBeObject":case"UsernameMissing":case"UsernameOrPasswordMismatch":case"UserPendingDeletion":case"UsernameCannotBeBlank":case"UsernameTooLong":case"UsernameMustBeString":case"PasswordMissing":case"PasswordCannotBeBlank":case"PasswordTooShort":case"PasswordTooLong":case"PasswordMustBeString":case"PasswordAttemptLimitExceeded":case"RememberMeValueNotValid":case"KeyNotFound":case"AppIdNotSet":case"AppIdNotValid":case"UserAlreadySignedIn":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},init:async e=>{try{if(!window.crypto.subtle)throw new We.WebCryptoUnavailable;if("object"!=typeof e)throw new We.ParamsMustBeObject;if(!Qt(e,"appId"))throw new We.AppIdMissing;const{appId:t}=e;return tt({appId:t}),await vr(t)}catch(e){switch(e.name){case"WebCryptoUnavailable":case"ParamsMustBeObject":case"AppIdMissing":case"AppIdAlreadySet":case"AppIdMustBeString":case"AppIdCannotBeBlank":case"AppIdNotValid":case"UserAlreadySignedIn":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},updateUser:async e=>{try{if("object"!=typeof e)throw new We.ParamsMustBeObject;if((e=>{if(!(Qt(e,"username")||Qt(e,"newPassword")||Qt(e,"email")||Qt(e,"profile")))throw new We.ParamsMissing;const{username:t,currentPassword:r,newPassword:n,email:s,profile:i}=e;if(Qt(e,"username")&&lr(t),Qt(e,"newPassword")){if(!r)throw new We.CurrentPasswordMissing;dr(r),dr(n)}if(s&&"string"!=typeof s)throw new We.EmailNotValid;i&&gr(i)})(e),!ir.keys.init)throw new We.UserNotSignedIn;const t=ir.seedString,r="UpdateUser",n=await(async e=>{if(e.username&&(e.username=e.username.toLowerCase()),e.newPassword){const[t,r]=await Promise.all([br(),mr(e.newPassword,a.a.decode(ir.seedString))]),{passwordToken:n}=await yr(e.currentPassword,t);e.currentPasswordToken=n,delete e.currentPassword,e.passwordToken=r.passwordToken,e.passwordSalts=r.passwordSalts,e.passwordBasedBackup=r.passwordBasedBackup,delete e.newPassword}return e.email?e.email=e.email.toLowerCase():Qt(e,"email")&&(e.email=!1),!e.profile&&Qt(e,"profile")&&(e.profile=!1),e})(or({},e));if(ir.reconnecting)throw new We.Reconnecting;if(!ir.keys.init)throw new We.UserNotSignedIn;if(t!==ir.seedString)throw new We.ServiceUnavailable;try{n.username&&wt.saveSeedString(ir.rememberMe,$e(),n.username,ir.seedString),await ir.request(r,n)}catch(e){fr(e,n.username)}}catch(e){switch(e.name){case"ParamsMustBeObject":case"ParamsMissing":case"UsernameAlreadyExists":case"UsernameMustBeString":case"UsernameCannotBeBlank":case"UsernameTooLong":case"CurrentPasswordMissing":case"CurrentPasswordIncorrect":case"PasswordAttemptLimitExceeded":case"PasswordMustBeString":case"PasswordCannotBeBlank":case"PasswordTooShort":case"PasswordTooLong":case"EmailNotValid":case"ProfileMustBeObject":case"ProfileCannotBeEmpty":case"ProfileHasTooManyKeys":case"ProfileKeyTooLong":case"ProfileValueMustBeString":case"ProfileValueCannotBeBlank":case"ProfileValueTooLong":case"AppIdNotSet":case"AppIdNotValid":case"UserNotFound":case"UserNotSignedIn":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},deleteUser:async()=>{try{if(ir.reconnecting)throw new We.Reconnecting;if(!ir.keys.init)throw new We.UserNotSignedIn;const e=ir.session.username;wt.removeSeedString(e),wt.removeCurrentSession();try{const e="DeleteUser";await ir.request(e)}catch(e){throw cr(e),e}ir.close()}catch(e){switch(e.name){case"UserNotSignedIn":case"UserNotFound":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},forgotPassword:async e=>{try{if("object"!=typeof e)throw new We.ParamsMustBeObject;if(!Qt(e,"username"))throw new We.UsernameMissing;lr(e.username);const t=e.username.toLowerCase(),r=$e(),n=wt.getSeedString(r,t),s="Your key was not found. Forgot password only works from a device you've signed in from before.";if(!n)throw new We.KeyNotFound(s);const i=a.a.decode(n),o=await Zt.hkdf.importHkdfKey(i),c=new WebSocket("".concat(Wt(et()),"/api/auth/forgot-password?appId=").concat(r,"&username=").concat(t));await new Promise((e,t)=>{setTimeout(()=>t(new We.Timeout),15e3),c.onerror=()=>t(new We.ServiceUnavailable),c.onmessage=async r=>{try{const n=JSON.parse(r.data);switch(n.route){case"ReceiveEncryptedToken":{const e=new Uint8Array(n.encryptedForgotPasswordToken.data),t=await Zt.diffieHellman.importKeyFromMaster(o,a.a.decode(n.dhKeySalt)),r=await Zt.diffieHellman.getSharedKeyWithServer(t);let i;try{i=a.a.encode(await Zt.aesGcm.decrypt(r,e))}catch(e){throw new We.KeyNotFound(s)}c.send(JSON.stringify({action:"ForgotPassword",params:{forgotPasswordToken:i}}));break}case"SuccessfullyForgotPassword":e();break;case"Error":{const e=n.data;switch(e.name){case"UsernameTooLong":throw new We.UsernameTooLong(e.maxLen);case"AppIdNotValid":throw new We.AppIdNotValid;case"UserNotFound":throw new We.UserNotFound;case"UserEmailNotFound":throw new We.UserEmailNotFound;default:throw n.status===m?new We.ServiceUnavailable:new We.UnknownServiceUnavailable(e)}}case"Ping":break;default:t(new Error("Received unknown message from userbase-server: ".concat(r.data)))}}catch(r){t(r)}}}),c.close()}catch(e){switch(e.name){case"ParamsMustBeObject":case"UsernameMissing":case"UsernameMustBeString":case"UsernameCannotBeBlank":case"UsernameTooLong":case"AppIdNotSet":case"AppIdNotValid":case"KeyNotFound":case"UserNotFound":case"UserEmailNotFound":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}}},Sr=r(13),Ir=r.n(Sr);function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Er=e=>{if(e.response){if("UserNotFound"===e.response.data)throw new We.UserNotFound;if(e.response.status===m)throw new We.InternalServerError;if(e.response.status===g)throw new We.Timeout}else if(e.message&&-1!==e.message.indexOf("timeout"))throw new We.Timeout};class Tr{constructor(e){this.startSeqNo=e,this.txSeqNo=null,this.transactions={},this.promiseResolve=null,this.promiseReject=null,this.index=null}getStartSeqNo(){return this.startSeqNo}getIndex(){return this.index}setIndex(e){this.index=e}async getResult(e){this.txSeqNo=e;const t=new Promise((e,t)=>{this.promiseResolve=e,this.promiseReject=t,setTimeout(()=>{t(new Error("timeout"))},1e4)});return this.verifyPromise(),t}verifyPromise(){(this.txSeqNo||0==this.txSeqNo)&&this.promiseResolve&&this.promiseReject&&this.transactions[this.txSeqNo]&&("Success"==this.transactions[this.txSeqNo]?this.promiseResolve():this.promiseReject(this.transactions[this.txSeqNo]))}addTransaction(e,t){this.transactions[e.seqNo]||(this.transactions[e.seqNo]=t,this.verifyPromise())}}class Ar{constructor(e,t){this.onChange=e,this.items={};this.itemsIndex=new Ir.a([],(e,t)=>e.seqNo<t.seqNo||e.seqNo===t.seqNo&&e.operationIndex<t.operationIndex?-1:e.seqNo>t.seqNo||e.seqNo===t.seqNo&&e.operationIndex>t.operationIndex?1:0),this.unverifiedTransactions=[],this.lastSeqNo=0,this.init=!1,this.dbKey=null,this.receivedMessage=t,this.applyTransactionsQueue=new $t}async applyTransactions(e){for(let t=0;t<e.length;t++){const r=e[t],n=r.seqNo;if(n!==this.lastSeqNo+1){console.warn("Client attempted to apply transaction with seq no ".concat(n," when last seq no is ").concat(this.lastSeqNo));continue}const s=await this.applyTransaction(this.dbKey,r);this.lastSeqNo=n;for(let r=0;r<this.unverifiedTransactions.length;r++)!this.unverifiedTransactions[r]||n<this.unverifiedTransactions[r].getStartSeqNo()||this.unverifiedTransactions[r].addTransaction(e[t],s);this.init&&"Success"===s&&this.onChange(this.getItems())}this.init||this.onChange(this.getItems())}applyBundle(e,t){if(0===this.lastSeqNo){for(let t=0;t<e.itemsIndex.length;t++){const r=e.itemsIndex[t],n=e.itemsIndex[t].itemId,s=e.items[n];this.items[n]=s,this.itemsIndex.insert(r)}this.lastSeqNo=t}else console.warn("Client attempted to apply bundle when last seq no is ".concat(this.lastSeqNo))}async applyTransaction(e,t){const r=t.seqNo,n=t.command;switch(n){case"Insert":{const n=await Zt.aesGcm.decryptJson(e,t.record),s=n.id,i=n.item;try{this.validateInsert(s)}catch(e){return e}return this.applyInsert(s,r,i)}case"Update":{const r=await Zt.aesGcm.decryptJson(e,t.record),n=r.id,s=r.item,i=r.__v;try{this.validateUpdateOrDelete(n,i)}catch(e){return e}return this.applyUpdate(n,s,i)}case"Delete":{const r=await Zt.aesGcm.decryptJson(e,t.record),n=r.id,s=r.__v;try{this.validateUpdateOrDelete(n,s)}catch(e){return e}return this.applyDelete(n)}case"BatchTransaction":{const n=t.operations,s=[];for(const t of n)s.push(t.record&&Zt.aesGcm.decryptJson(e,t.record));const i=await Promise.all(s);try{this.validateBatchTransaction(n,i)}catch(e){return e}return this.applyBatchTransaction(r,n,i)}case"Rollback":return;default:return void console.warn("Unknown command: ".concat(n))}}validateInsert(e){if(this.items[e])throw new We.ItemAlreadyExists}validateUpdateOrDelete(e,t){if(!this.items[e])throw new We.ItemDoesNotExist;if(t<=this.getItemVersionNumber(e))throw new We.ItemUpdateConflict}itemExists(e){return Qt(this.items,e)}applyInsert(e,t,r,n){const s={seqNo:t};return"number"==typeof n&&(s.operationIndex=n),this.items[e]=Ur({},s,{record:r,__v:0}),this.itemsIndex.insert(Ur({},s,{itemId:e})),"Success"}applyUpdate(e,t,r){return this.items[e].record=t,this.items[e].__v=r,"Success"}applyDelete(e){return this.itemsIndex.remove(this.items[e]),delete this.items[e],"Success"}validateBatchTransaction(e,t){const r={};for(let n=0;n<e.length;n++){const s=e[n],i=t[n].id,a=t[n].__v;if(r[i])throw new We.OperationsConflict;switch(r[i]=!0,s.command){case"Insert":this.validateInsert(i);break;case"Update":case"Delete":this.validateUpdateOrDelete(i,a)}}}applyBatchTransaction(e,t,r){for(let n=0;n<t.length;n++){const s=t[n],i=r[n].id,a=r[n].item,o=r[n].__v;switch(s.command){case"Insert":this.applyInsert(i,e,a,n);break;case"Update":this.applyUpdate(i,a,o);break;case"Delete":this.applyDelete(i,o)}}return"Success"}registerUnverifiedTransaction(){const e=new Tr(this.lastSeqNo),t=this.unverifiedTransactions.push(e);return e.setIndex(t-1),e}unregisterUnverifiedTransaction(e){delete this.unverifiedTransactions[e.getIndex()]}getItems(){const e=[];for(let t=0;t<this.itemsIndex.array.length;t++){const r=this.itemsIndex.array[t].itemId,n=this.items[r].record;e.push({itemId:r,item:n})}return e}getItemVersionNumber(e){return this.items[e].__v}}const Br=e=>{if("object"!=typeof e)throw new We.ParamsMustBeObject;if(!Qt(e,"databaseName"))throw new We.DatabaseNameMissing;const t=e.databaseName;if("string"!=typeof t)throw new We.DatabaseNameMustBeString;if(0===t.length)throw new We.DatabaseNameCannotBeBlank;if(t.length>50)throw new We.DatabaseNameTooLong(50);if(ir.reconnecting)throw new We.Reconnecting;if(!ir.keys.init)throw new We.UserNotSignedIn},xr=e=>{const t=ir.state.dbNameToHash[e],r=ir.state.databases[t];if(!t||!r||!r.init)throw new We.DatabaseNotOpen;return r},Nr=async(e,t)=>{if(!Qt(t,"item"))throw new We.ItemMissing;const{item:r,itemId:n}=t;if(Qt(t,"itemId")){if("string"!=typeof n)throw new We.ItemIdMustBeString;if(0===n.length)throw new We.ItemIdCannotBeBlank;if(n.length>100)throw new We.ItemIdTooLong(100)}const s=JSON.stringify(r);if(!s)throw new We.ItemInvalid;if(Xt(s)>10240)throw new We.ItemTooLarge(10);const i=n||ct()(),a={id:i,item:r};return{itemKey:await Zt.hmac.signString(ir.keys.hmacKey,i),encryptedItem:await Zt.aesGcm.encryptJson(e.dbKey,a)}},kr=async(e,t)=>{if(!Qt(t,"item"))throw new We.ItemMissing;if(!Qt(t,"itemId"))throw new We.ItemIdMissing;const{item:r,itemId:n}=t;if("string"!=typeof n)throw new We.ItemIdMustBeString;if(0===n.length)throw new We.ItemIdCannotBeBlank;if(n.length>100)throw new We.ItemIdTooLong(100);if(!e.itemExists(n))throw new We.ItemDoesNotExist;const s=JSON.stringify(r);if(!s)throw new We.ItemInvalid;if(Xt(s)>10240)throw new We.ItemTooLarge(10);const i=await Zt.hmac.signString(ir.keys.hmacKey,n),a={id:n,item:r,__v:e.getItemVersionNumber(n)+1};return{itemKey:i,encryptedItem:await Zt.aesGcm.encryptJson(e.dbKey,a)}},_r=async(e,t)=>{if(!Qt(t,"itemId"))throw new We.ItemIdMissing;const{itemId:r}=t;if("string"!=typeof r)throw new We.ItemIdMustBeString;if(0===r.length)throw new We.ItemIdCannotBeBlank;if(r.length>100)throw new We.ItemIdTooLong(100);if(!e.itemExists(r))throw new We.ItemDoesNotExist;const n=await Zt.hmac.signString(ir.keys.hmacKey,r),s={id:r,__v:e.getItemVersionNumber(r)+1};return{itemKey:n,encryptedItem:await Zt.aesGcm.encryptJson(e.dbKey,s)}},Or=async(e,t,r)=>{try{const n=e.registerUnverifiedTransaction(),s=Ur({},r,{dbId:e.dbId,dbNameHash:ir.state.dbIdToHash[e.dbId]}),i=(await ir.request(t,s)).data.sequenceNo;return await n.getResult(i),e.unregisterUnverifiedTransaction(n),i}catch(e){throw Er(e),e}},Cr=async e=>{const t=await Zt.aesGcm.decryptString(ir.keys.encryptionKey,e.encryptedDbKey),r=await Zt.aesGcm.getKeyFromKeyString(t);return{databaseName:await Zt.aesGcm.decryptString(r,e.databaseName)}};var Rr={openDatabase:async e=>{try{if(Br(e),!Qt(e,"changeHandler"))throw new We.ChangeHandlerMissing;const{databaseName:t,changeHandler:r}=e;if("function"!=typeof r)throw new We.ChangeHandlerMustBeFunction;const n=ir.state.dbNameToHash[t]||await Zt.hmac.signString(ir.keys.hmacKey,t);ir.state.dbNameToHash[t]=n;const s=await(async e=>{const t=ct()(),r=await Zt.aesGcm.generateKey(),n=await Zt.aesGcm.getKeyStringFromKey(r),[s,i]=await Promise.all([Zt.aesGcm.encryptString(ir.keys.encryptionKey,n),Zt.aesGcm.encryptString(r,e)]);return{dbId:t,encryptedDbKey:s,encryptedDbName:i}})(t);await(async(e,t,r)=>{try{const n=ir.state.databases[e];let s,i;const a=new Promise((e,t)=>{s=e,i=setTimeout(()=>t(new Error("timeout")),2e4)});if(n){n.onChange=t;const e=n.receivedMessage;if(n.receivedMessage=()=>{e(),s()},n.init)return t(n.getItems()),void n.receivedMessage()}else ir.state.databases[e]=new Ar(t,s);const o="OpenDatabase",c={dbNameHash:e,newDatabaseParams:r};try{await ir.request(o,c),await a}catch(e){if(clearTimeout(i),e.response&&e.response.data){const t=e.response.data;if("Database already creating"===t)throw new We.DatabaseAlreadyOpening;switch(t.name){case"SubscriptionPlanNotSet":throw new We.SubscriptionPlanNotSet;case"SubscriptionNotFound":throw new We.SubscriptionNotFound;case"SubscribedToIncorrectPlan":throw new We.SubscribedToIncorrectPlan;case"SubscriptionInactive":throw new We.SubscriptionInactive(t.subscriptionStatus);case"TrialExpired":throw new We.TrialExpired}}throw e}}catch(e){throw Er(e),e}})(n,r,s)}catch(e){switch(e.name){case"ParamsMustBeObject":case"DatabaseAlreadyOpening":case"DatabaseNameMustBeString":case"DatabaseNameMissing":case"DatabaseNameCannotBeBlank":case"DatabaseNameTooLong":case"ChangeHandlerMissing":case"ChangeHandlerMustBeFunction":case"UserNotSignedIn":case"UserNotFound":case"SubscriptionPlanNotSet":case"SubscriptionNotFound":case"SubscribedToIncorrectPlan":case"SubscriptionInactive":case"TrialExpired":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},getDatabases:async()=>{try{if(!ir.keys.init)throw new We.UserNotSignedIn;try{const e=[];let t="GetDatabases",r=await ir.request(t),n=await Promise.all(r.data.databases.map(e=>Cr(e)));for(e.push(...n);r.data.nextPageToken;){const s={nextPageToken:r.data.nextPageToken};r=await ir.request(t,s),n=await Promise.all(r.data.databases.map(e=>Cr(e))),e.push(...n)}return{databases:e}}catch(e){throw Er(e),e}}catch(e){switch(e.name){case"UserNotSignedIn":case"ServiceUnavailable":throw e;default:throw new We.ServiceUnavailable}}},insertItem:async e=>{try{Br(e);const t=xr(e.databaseName),r="Insert",n=await Nr(t,e);await Or(t,r,n)}catch(e){switch(e.name){case"ParamsMustBeObject":case"DatabaseNotOpen":case"DatabaseNameMissing":case"DatabaseNameMustBeString":case"DatabaseNameCannotBeBlank":case"DatabaseNameTooLong":case"ItemIdMustBeString":case"ItemIdCannotBeBlank":case"ItemIdTooLong":case"ItemMissing":case"ItemInvalid":case"ItemTooLarge":case"ItemAlreadyExists":case"UserNotSignedIn":case"UserNotFound":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},updateItem:async e=>{try{Br(e);const t=xr(e.databaseName),r="Update",n=await kr(t,e);await Or(t,r,n)}catch(e){switch(e.name){case"ParamsMustBeObject":case"DatabaseNotOpen":case"DatabaseNameMissing":case"DatabaseNameMustBeString":case"DatabaseNameCannotBeBlank":case"DatabaseNameTooLong":case"ItemIdMissing":case"ItemIdMustBeString":case"ItemIdCannotBeBlank":case"ItemIdTooLong":case"ItemMissing":case"ItemInvalid":case"ItemTooLarge":case"ItemDoesNotExist":case"ItemUpdateConflict":case"UserNotSignedIn":case"UserNotFound":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable}}},deleteItem:async e=>{try{Br(e);const t=xr(e.databaseName),r="Delete",n=await _r(t,e);await Or(t,r,n)}catch(e){switch(e.name){case"ParamsMustBeObject":case"DatabaseNotOpen":case"DatabaseNameMissing":case"DatabaseNameMustBeString":case"DatabaseNameCannotBeBlank":case"DatabaseNameTooLong":case"ItemIdMissing":case"ItemIdMustBeString":case"ItemIdCannotBeBlank":case"ItemIdTooLong":case"ItemDoesNotExist":case"ItemUpdateConflict":case"UserNotSignedIn":case"UserNotFound":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},putTransaction:async e=>{try{if(Br(e),!Qt(e,"operations"))throw new We.OperationsMissing;const{databaseName:t,operations:r}=e;if(!Array.isArray(r))throw new We.OperationsMustBeArray;const n=xr(t),s="BatchTransaction",i=await Promise.all(r.map(e=>{const t=e.command;switch(t){case"Insert":return Nr(n,e);case"Update":return kr(n,e);case"Delete":return _r(n,e);default:throw new We.CommandNotRecognized(t)}})),a=await Promise.all(i),o={operations:r.map((e,t)=>Ur({command:e.command},a[t]))};try{await Or(n,s,o)}catch(e){if(e.response&&"OperationsExceedLimit"===e.response.data.error)throw new We.OperationsExceedLimit(e.response.data.limit);throw e}}catch(e){switch(e.name){case"ParamsMustBeObject":case"DatabaseNotOpen":case"DatabaseNameMissing":case"DatabaseNameMustBeString":case"DatabaseNameCannotBeBlank":case"DatabaseNameTooLong":case"OperationsMissing":case"OperationsMustBeArray":case"OperationsConflict":case"OperationsExceedLimit":case"CommandNotRecognized":case"ItemIdMissing":case"ItemIdMustBeString":case"ItemIdCannotBeBlank":case"ItemIdTooLong":case"ItemMissing":case"ItemInvalid":case"ItemTooLarge":case"ItemAlreadyExists":case"ItemDoesNotExist":case"ItemUpdateConflict":case"UserNotSignedIn":case"UserNotFound":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}}};const Dr=e=>{if(e.response){if(e.response.status===m)throw new We.InternalServerError;if(e.response.status===g)throw new We.Timeout}else if(e.message&&e.message.includes("timeout"))throw new We.Timeout},Lr=e=>{if(ir.reconnecting)throw new We.Reconnecting;if(!ir.keys.init)throw new We.UserNotSignedIn;const t=ir.userData.stripeData;if(!t.stripeAccountId)throw new We.StripeAccountNotConnected;if("disabled"===t.paymentsMode)throw new We.PaymentsDisabled;if(!Qt(window,"Stripe"))throw new We.StripeJsLibraryMissing;if("object"!=typeof e)throw new We.ParamsMustBeObject;if(!Qt(e,"successUrl"))throw new We.SuccessUrlMissing;if("string"!=typeof e.successUrl)throw new We.SuccessUrlMustBeString;const r=zt(e.successUrl);if("http"!==r&&"https"!==r){const e=!0;throw new We.SuccessUrlInvalid(e)}if(!Qt(e,"cancelUrl"))throw new We.CancelUrlMissing;if("string"!=typeof e.cancelUrl)throw new We.CancelUrlMustBeString;const n=zt(e.cancelUrl);if("http"!==n&&"https"!==n){const e=!0;throw new We.CancelUrlInvalid(e)}},jr=()=>{if(ir.reconnecting)throw new We.Reconnecting;if(!ir.keys.init)throw new We.UserNotSignedIn;const e=ir.userData.stripeData;if(!e.stripeAccountId)throw new We.StripeAccountNotConnected;if("disabled"===e.paymentsMode)throw new We.PaymentsDisabled;if("canceled"===e.subscriptionStatus)throw new We.SubscriptionAlreadyCanceled};var Kr={purchaseSubscription:async e=>{try{const t=ir.userData.stripeData;if(t.subscriptionStatus&&"canceled"!==t.subscriptionStatus)throw new We.SubscriptionPlanAlreadyPurchased;Lr(e);try{const r="PurchaseSubscription",n=(await ir.request(r,e)).data,s=rt("prod"===t.paymentsMode),i=await window.Stripe(s,{stripeAccount:t.stripeAccountId}).redirectToCheckout({sessionId:n});if(i.error)throw i.error}catch(e){if(Dr(e),e.response){if("SubscriptionPlanNotSet"===e.response.data)throw new We.SubscriptionPlanNotSet;if("SubscriptionPlanAlreadyPurchased"===e.response.data)throw new We.SubscriptionPlanAlreadyPurchased;if("SuccessUrlInvalid"===e.response.data)throw new We.SuccessUrlInvalid;if("CancelUrlInvalid"===e.response.data)throw new We.CancelUrlInvalid;if(e.response.data&&"StripeError"===e.response.data.name)throw new We.StripeError(e.response.data)}throw e}}catch(e){switch(e.name){case"ParamsMustBeObject":case"SuccessUrlMissing":case"SuccessUrlMustBeString":case"SuccessUrlInvalid":case"CancelUrlMissing":case"CancelUrlMustBeString":case"CancelUrlInvalid":case"StripeError":case"StripeJsLibraryMissing":case"SubscriptionPlanNotSet":case"SubscriptionPlanAlreadyPurchased":case"StripeAccountNotConnected":case"PaymentsDisabled":case"UserNotSignedIn":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},cancelSubscription:async()=>{try{jr();try{const e="CancelSubscription",t=(await ir.request(e)).data;return ir.userData.stripeData.cancelAt=t,{cancelSubscriptionAt:t}}catch(e){if(Dr(e),e.response&&"SubscriptionPlanNotSet"===e.response.data)throw new We.SubscriptionPlanNotSet;throw e}}catch(e){switch(e.name){case"SubscriptionPlanNotSet":case"StripeAccountNotConnected":case"PaymentsDisabled":case"SubscriptionAlreadyCanceled":case"UserNotSignedIn":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},resumeSubscription:async()=>{try{jr();try{const e="ResumeSubscription";await ir.request(e),delete ir.userData.stripeData.cancelAt}catch(e){if(Dr(e),e.response&&"SubscriptionPlanNotSet"===e.response.data)throw new We.SubscriptionPlanNotSet;throw e}}catch(e){switch(e.name){case"SubscriptionPlanNotSet":case"StripeAccountNotConnected":case"PaymentsDisabled":case"SubscriptionAlreadyCanceled":case"UserNotSignedIn":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}},updatePaymentMethod:async e=>{try{Lr(e);const t=ir.userData.stripeData;if(!t.subscriptionStatus)throw new We.SubscriptionNotPurchased;try{const r="UpdatePaymentMethod",n=(await ir.request(r,e)).data,s=rt("prod"===t.paymentsMode),i=await window.Stripe(s,{stripeAccount:t.stripeAccountId}).redirectToCheckout({sessionId:n});if(i.error)throw i.error}catch(e){if(Dr(e),e.response){if("SuccessUrlInvalid"===e.response.data)throw new We.SuccessUrlInvalid;if("CancelUrlInvalid"===e.response.data)throw new We.CancelUrlInvalid}throw e}}catch(e){switch(e.name){case"ParamsMustBeObject":case"SuccessUrlMissing":case"SuccessUrlMustBeString":case"SuccessUrlInvalid":case"CancelUrlMissing":case"CancelUrlMustBeString":case"CancelUrlInvalid":case"StripeJsLibraryMissing":case"SubscriptionNotPurchased":case"StripeAccountNotConnected":case"PaymentsDisabled":case"UserNotSignedIn":case"TooManyRequests":case"ServiceUnavailable":throw e;default:throw new We.UnknownServiceUnavailable(e)}}}};t.default={init:Mr.init,signUp:Mr.signUp,signIn:Mr.signIn,signOut:Mr.signOut,updateUser:Mr.updateUser,deleteUser:Mr.deleteUser,forgotPassword:Mr.forgotPassword,openDatabase:Rr.openDatabase,getDatabases:Rr.getDatabases,insertItem:Rr.insertItem,updateItem:Rr.updateItem,deleteItem:Rr.deleteItem,putTransaction:Rr.putTransaction,purchaseSubscription:Kr.purchaseSubscription,cancelSubscription:Kr.cancelSubscription,resumeSubscription:Kr.resumeSubscription,updatePaymentMethod:Kr.updatePaymentMethod}}]).default;
//# sourceMappingURL=userbase.js.map